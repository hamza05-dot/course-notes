<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercices de Programmation C</title>
    <link rel="icon" type="image/png" href="images.png">
    <style>
        @media print {
            body { margin: 0; }
            .no-print { display: none; }
            .page-break { page-break-before: always; }
        }
        
        body {
            font-family: 'Calibri', 'Arial', sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #1f4788;
            text-align: center;
            border-bottom: 3px solid #1f4788;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2em;
        }
        
        h2 {
            color: #2c5aa0;
            margin-top: 30px;
            margin-bottom: 15px;
            border-left: 5px solid #1f4788;
            padding-left: 15px;
            font-size: 1.5em;
        }
        
        h3 {
            color: #444;
            margin-top: 20px;
        }
        
        .code-block {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-left: 4px solid #1f4788;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.4;
            font-size: 0.9em;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
            overflow-x: auto;
            display: block;
        }
        
        th, td {
            border: 1px solid #333;
            padding: 10px;
            text-align: center;
        }
        
        th {
            background-color: #1f4788;
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        ol, ul {
            margin-left: 25px;
            line-height: 1.8;
        }
        
        li {
            margin-bottom: 10px;
        }
        
        button {
            background-color: white;
            color: #667eea;
            border: none;
            padding: 15px 40px;
            margin-bottom: 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            background-color: #f8f9fa;
        }
        
        .correction {
            color: red;
        }

        pre {
            overflow-x: auto;
            background-color: #f8f8f8;
            padding: 10px;
            border-radius: 5px;
        }

        code {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
            }

            .container {
                padding: 20px 15px;
            }

            h1 {
                font-size: 1.5em;
                padding-bottom: 10px;
            }

            h2 {
                font-size: 1.2em;
                margin-top: 20px;
            }

            button {
                padding: 12px 25px;
                font-size: 16px;
                width: 100%;
                justify-content: center;
            }

            .code-block {
                padding: 10px;
                font-size: 0.75em;
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 8px 5px;
            }

            pre {
                font-size: 0.8em;
            }

            ol, ul {
                margin-left: 15px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.3em;
            }

            h2 {
                font-size: 1.1em;
            }

            .code-block {
                font-size: 0.7em;
            }

            table {
                font-size: 10px;
            }

            th, td {
                padding: 6px 3px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" style="text-decoration: none;">
            <button class="back-button">← Retour à l'accueil</button>
        </a>
        
        <h1>Exercices de Programmation C<br>Pointeurs et Structures de Données</h1>

        <h2>Exercice 1 : Manipulation des Pointeurs</h2>
        
        <p>Considérons le code C suivant :</p>
        
        <div class="code-block">int A[] = {2, 4, 6, 8, 10, 12, 14};
int *P = A + 2;</div>

        <p><strong>Indiquer la valeur retournée ou l'adresse retournée par chacune des expressions suivantes :</strong></p>
        
        <ol>
            <li>*P <span class="correction">= 6</span></li>
            <li>*(P + 3) <span class="correction">= *(A + 2 + 3) = *(A + 5) = 12</span></li>
            <li>P - A <span class="correction">= A - 2 - A = 2</span></li>
            <li>&A[6] - P <span class="correction">= (A + 6) - (A + 2) = A + 6 - A - 2 = 4</span></li>
            <li>*(A + *(P - 1) / 2) <span class="correction">= *(A + *(A + 2 -1) / 2 ) = *(A + *(A + 1) / 2 ) = *(A + 4 / 2) = *(A + 2) = 6</span></li>
            <li>*(P - 2) + *(P + 2) <span class="correction">= *(A + 2 - 2) + *(A + 2 + 2) = *A + *(A + 4) = 2 + 10 = 12</span></li>
            <li>P + (*(P + 1) % 4) <span class="correction">= A + 2 + (*(A + 2 +1) % 4) = A + 2 + (8 % 4) = A + 2 + 0 = P</span></li>
            <li>&P <span class="correction">l'adresse de case P</span></li>
        </ol>

        <h2>Exercice 2 : Manipulation des Pointeurs (Suite)</h2>
        
        <p>Considérons le code C suivant :</p>
        
        <div class="code-block">int B[] = {5, 10, 15, 20, 25, 30};
int *Q = &B[4];</div>

        <p><strong>Indiquer la valeur retournée ou l'adresse retournée par chacune des expressions suivantes :</strong></p>
        <ol>
            <li>*Q <span class="correction">= 25</span></li>
            <li>*(Q - 3) <span class="correction">= *(B + 4 - 3) = *(B + 1) = 10</span></li>
            <li>Q - B <span class="correction">= (B + 4) - B = 4</span></li>
            <li>*(B + (*Q / 5)) <span class="correction">= *(B + (25 / 5)) = *(B + 5) = 30</span></li>
            <li>&B[5] - Q <span class="correction">= (B + 5) - (B + 4) = 1</span></li>
            <li>*(Q - 1) + *(Q + 1) <span class="correction">= 20 + 30 = 50</span></li>
            <li>Q + (*(Q - 2) / 10) <span class="correction">= Q + (15 / 10) = Q + 1 = adresse de B[5]</span></li>
            <li>*(Q + 2) <span class="correction">= *(B + 6) = Valeur indéterminée (Hors tableau)</span></li>
        </ol>

        <h2>Exercice 3 : Traçage de Programme avec Pointeurs</h2>
        
        <p>Soit le programme suivant :</p>
        
        <div class="code-block">int main() {
    int a = 1;
    int b = 2;
    int c = 3;
    int *p1, *p2;
    
    p1 = &a;
    p2 = &c;
    *p1 = *p2;
    (*p2)++;
    p1 = p2;
    p2 = &b;
    *p1 *= *p2;
    ++(*p2);
    a = *p2 * *p1;
    p1 = &a;
    *p2 = *p1 /= *p2;
    
    return 0;
}</div>

        <p><strong>Remplir le tableau de chaque variable après chaque instruction :</strong></p>
        
        <table>
            <tr>
                <th>Instruction</th>
                <th>a</th>
                <th>b</th>
                <th>c</th>
                <th>p1</th>
                <th>p2</th>
            </tr>
            <tr>
                <td>init</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>?</td>
                <td>?</td>
            </tr>
            <tr>
                <td>p1 = &a;</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>&a</td>
                <td>?</td>
            </tr>
            <tr>
                <td>p2 = &c;</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>&a</td>
                <td>&c</td>
            </tr>
            <tr>
                <td>*p1 = *p2;</td>
                <td>3</td>
                <td>2</td>
                <td>3</td>
                <td>&a</td>
                <td>&c</td>
            </tr>
            <tr>
                <td>(*p2)++;</td>
                <td>3</td>
                <td>2</td>
                <td>4</td>
                <td>&a</td>
                <td>&c</td>
            </tr>
            <tr>
                <td>p1 = p2;</td>
                <td>3</td>
                <td>2</td>
                <td>4</td>
                <td>&c</td>
                <td>&c</td>
            </tr>
            <tr>
                <td>p2 = &b;</td>
                <td>3</td>
                <td>2</td>
                <td>4</td>
                <td>&c</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>*p1 *= *p2;</td>
                <td>3</td>
                <td>2</td>
                <td>8</td>
                <td>&c</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>++(*p2);</td>
                <td>3</td>
                <td>3</td>
                <td>8</td>
                <td>&c</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>a = *p2 * *p1;</td>
                <td>24</td>
                <td>3</td>
                <td>8</td>
                <td>&c</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>p1 = &a;</td>
                <td>24</td>
                <td>3</td>
                <td>8</td>
                <td>&a</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>*p2 = *p1 /= *p2;</td>
                <td>8</td>
                <td>8</td>
                <td>8</td>
                <td>&a</td>
                <td>&b</td>
            </tr>
        </table>

        <h2>Exercice 4 : Gestion de Stock avec Liste Chaînée</h2>
        
        <p>Étant donnée la structure suivante :</p>
        <p><strong>Produit</strong> défini par son nom, son code, sa catégorie, sa quantité et son prix unitaire. On souhaite gérer un stock de produits à l'aide d'une liste chaînée simplement.</p>
        
        <ol>
            <li>Définir la structure Produit et la structure de la liste chaînée.</li>
<pre><code><span style="color: red; font-weight: bold;">typedef struct {
    char nom[30];
    int code;
    char categorie[20];
    int quantite;
    float prix;
} Produit;

typedef struct Node {
    Produit p;
    struct Node *suiv;
} Node;</span></code></pre>

            <li>Écrire une fonction qui crée un nouveau produit.</li>
<pre><code><span style="color: red; font-weight: bold;">Produit creerProduit() {
    Produit p;
    scanf("%s %d %s %d %f", p.nom, &p.code, 
          p.categorie, &p.quantite, &p.prix);
    return p;
}</span></code></pre>

            <li>Écrire une fonction qui ajoute un produit en tête de la liste.</li>
<pre><code><span style="color: red; font-weight: bold;">Node* ajouterTete(Node *liste, Produit p) {
    Node *n = malloc(sizeof(Node));
    n->p = p;
    n->suiv = liste;
    return n;
}</span></code></pre>

            <li>Écrire une fonction qui affiche tous les produits.</li>
<pre><code><span style="color: red; font-weight: bold;">void afficher(Node *l) {
    while(l) {
        printf("%s %d %d %.2f\n", l->p.nom, 
               l->p.code, l->p.quantite, l->p.prix);
        l = l->suiv;
    }
}</span></code></pre>

            <li>Écrire une fonction qui supprime un produit à partir de son code.</li>
<pre><code><span style="color: red; font-weight: bold;">Node* supprimer(Node *l, int code) {
    if (!l) return NULL;
    if (l->p.code == code) {
        Node *tmp = l->suiv;
        free(l);
        return tmp;
    }
    l->suiv = supprimer(l->suiv, code);
    return l;
}</span></code></pre>

            <li>Écrire une fonction qui calcule la valeur totale du stock.</li>
<pre><code><span style="color: red; font-weight: bold;">float valeurStock(Node *l) {
    float s = 0;
    while(l) {
        s += l->p.quantite * l->p.prix;
        l = l->suiv;
    }
    return s;
}</span></code></pre>
        </ol>

        <h2>Exercice 5 : Gestion des Vols avec Tableau Dynamique</h2>

        <p>On souhaite développer un programme de gestion des vols à l'aide d'un tableau dynamique.</p>

        <ol>
            <li>Définir la structure <strong>Vol</strong>.</li>
<pre><code><span style="color: red; font-weight: bold;">typedef struct {
    int num;
    char dep[20];
    char arr[20];
    char date[15];
    int places_total;
    int places_disp;
    float prix;
} Vol;</span></code></pre>

            <li>Fonction de saisie d'un vol.</li>
<pre><code><span style="color: red; font-weight: bold;">void saisirVol(Vol *v) {
    do {
        printf("Numéro du vol : ");
        scanf("%d", &v->num);
    } while(v->num <= 0);

    printf("Ville de départ : ");
    scanf("%s", v->dep);
    printf("Ville d'arrivée : ");
    scanf("%s", v->arr);
    printf("Date de départ : ");
    scanf("%s", v->date);

    do {
        printf("Nombre total de places : ");
        scanf("%d", &v->places_total);
    } while(v->places_total <= 0);

    v->places_disp = v->places_total;

    do {
        printf("Prix du billet : ");
        scanf("%f", &v->prix);
    } while(v->prix <= 0);
}</span></code></pre>

            <li>Fonction calculant la recette d'un vol.</li>
<pre><code><span style="color: red; font-weight: bold;">float recette(Vol v) {
    return (v.places_total - v.places_disp) * v.prix;
}</span></code></pre>

            <li>Fonction retournant le vol avec recette maximale.</li>
<pre><code><span style="color: red; font-weight: bold;">Vol maxRecette(Vol t[], int n) {
    int imax = 0;
    for(int i = 1; i < n; i++)
        if(recette(t[i]) > recette(t[imax])) 
            imax = i;
    return t[imax];
}</span></code></pre>

            <li>Fonction calculant la recette totale.</li>
<pre><code><span style="color: red; font-weight: bold;">float recetteTotale(Vol t[], int n) {
    float total = 0;
    for(int i = 0; i < n; i++)
        total += recette(t[i]);
    return total;
}</span></code></pre>

            <li>Fonction de tri par ordre décroissant de recette.</li>
<pre><code><span style="color: red; font-weight: bold;">void trier(Vol t[], int n) {
    for(int i = 0; i < n-1; i++)
        for(int j = i+1; j < n; j++)
            if(recette(t[j]) > recette(t[i])) {
                Vol tmp = t[i];
                t[i] = t[j];
                t[j] = tmp;
            }
}</span></code></pre>

            <li>Fonction de recherche par numéro.</li>
<pre><code><span style="color: red; font-weight: bold;">void rechercherVol(Vol t[], int n, int num) {
    int trouve = 0;
    for(int i = 0; i < n; i++) {
        if(t[i].num == num) {
            printf("Vol %d : %s -> %s\n", 
                   t[i].num, t[i].dep, t[i].arr);
            trouve = 1;
            break;
        }
    }
    if(!trouve) 
        printf("Vol %d non trouvé.\n", num);
}</span></code></pre>

            <li>Fonction de réservation de places.</li>
<pre><code><span style="color: red; font-weight: bold;">void reserverPlaces(Vol *v, int nbre) {
    if(nbre <= 0 || nbre > v->places_disp) {
        printf("Impossible de réserver.\n");
        return;
    }
    v->places_disp -= nbre;
    printf("%d places réservées.\n", nbre);
}</span></code></pre>

            <li>Fonction de sauvegarde dans un fichier.</li>
<pre><code><span style="color: red; font-weight: bold;">void sauvegarder(Vol t[], int n) {
    FILE *f = fopen("vols.txt", "w");
    if(f == NULL) return;
    for(int i = 0; i < n; i++)
        fprintf(f, "%d %s %s %s %d %.2f\n",
                t[i].num, t[i].dep, t[i].arr, 
                t[i].date, t[i].places_disp, 
                t[i].prix);
    fclose(f);
}</span></code></pre>
        </ol>
    </div>
</body>
</html>