<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercices de Programmation C</title>
    <style>
        @media print {
            body { margin: 0; }
            .no-print { display: none; }
            .page-break { page-break-before: always; }
        }
        
        body {
            font-family: 'Calibri', 'Arial', sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #1f4788;
            text-align: center;
            border-bottom: 3px solid #1f4788;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #2c5aa0;
            margin-top: 30px;
            margin-bottom: 15px;
            border-left: 5px solid #1f4788;
            padding-left: 15px;
        }
        
        h3 {
            color: #444;
            margin-top: 20px;
        }
        
        .code-block {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-left: 4px solid #1f4788;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.4;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
        }
        
        th, td {
            border: 1px solid #333;
            padding: 10px;
            text-align: center;
        }
        
        th {
            background-color: #1f4788;
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        ol, ul {
            margin-left: 25px;
            line-height: 1.8;
        }
        
        li {
            margin-bottom: 10px;
        }
        
        .nested-list {
            margin-top: 10px;
            margin-left: 20px;
        }
        
        .download-buttons {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background-color: #e8f0f8;
            border-radius: 5px;
        }
        
        button {
            background-color: #1f4788;
            color: white;
            border: none;
            padding: 12px 30px;
            margin: 0 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        
        button:hover {
            background-color: #163560;
        }
        
        .exercise-number {
            background-color: #1f4788;
            color: white;
            padding: 5px 15px;
            border-radius: 3px;
            display: inline-block;
            margin-bottom: 10px;
        }
	.correction {
            color: red;
        }
    </style>
</head>
<body>
    <div class="container">

        <h1>Exercices de Programmation C<br>Pointeurs et Structures de Données</h1>

        <h2>Exercice 1 : Manipulation des Pointeurs</h2>
        
        <p>Considérons le code C suivant :</p>
        
        <div class="code-block">int A[] = {2, 4, 6, 8, 10, 12, 14};
int *P = A + 2;</div>

        <p><strong>Indiquer la valeur retournée ou l'adresse retournée par chacune des expressions suivantes :</strong></p>
        
        <ol>
            <li>*P <span style="color:red;">= 6</span></li>
            <li>*(P + 3) <span style="color:red;"> = *(A + 2 + 3) = *(A + 5) = 12</span></li>
            <li>P - A <span style="color:red;">= A - 2 - A = 2</span> </li>
            <li>&A[6] - P <span style="color:red;">= (A + 6) - (A + 2) = A + 6 - A - 2 = 4 </span></li>
            <li>*(A + *(P - 1) / 2) <span style="color:red;">= *(A + *(A + 2 -1) / 2 ) = *(A + *(A + 1) / 2 ) = *(A + 4 / 2) = *(A + 2) = 6</span></li>
            <li>*(P - 2) + *(P + 2) <span style="color:red;">= *(A + 2 - 2) + *(A + 2 + 2) = *A + *(A + 4) = 2 + 10 = 12</span></li>
            <li>P + (*(P + 1) % 4) <span style="color:red;">= A + 2 + (*(A + 2 +1) % 4) = A + 2 + (8 % 4) = A + 2 + 0 = P </span></li>
            <li>&P <span style="color:red;"> l'adress de case P</span></li>
        </ol>

        <div class="page-break"></div>

        <h2>Exercice 2 : Manipulation des Pointeurs (Suite)</h2>
        
        <p>Considérons le code C suivant :</p>
        
        <div class="code-block">int B[] = {5, 10, 15, 20, 25, 30};
int *Q = &B[4];</div>

        <p><strong>Indiquer la valeur retournée ou l'adresse retournée par chacune des expressions suivantes :</strong></p>
        <ol>
            <li>*Q <span class="correction">= 25</span></li>
            <li>*(Q - 3) <span class="correction">= *(B + 4 - 3) = *(B + 1) = 10</span></li>
            <li>Q - B <span class="correction">= (B + 4) - B = 4</span></li>
            <li>*(B + (*Q / 5)) <span class="correction">= *(B + (25 / 5)) = *(B + 5) = 30</span></li>
            <li>&B[5] - Q <span class="correction">= (B + 5) - (B + 4) = 1</span></li>
            <li>*(Q - 1) + *(Q + 1) <span class="correction">= 20 + 30 = 50</span></li>
            <li>Q + (*(Q - 2) / 10) <span class="correction">= Q + (15 / 10) = Q + 1 = adresse de B[5]</span></li>
            <li>*(Q + 2) <span class="correction">= *(B + 6) = Valeur indéterminée (Hors tableau)</span></li>
        </ol>
        <div class="page-break"></div>

        <h2>Exercice 3 : Traçage de Programme avec Pointeurs</h2>
        
        <p>Soit le programme suivant :</p>
        
        <div class="code-block">int main() {
    int a = 1;
    int b = 2;
    int c = 3;
    int *p1, *p2;
    
    p1 = &a;
    p2 = &c;
    *p1 = *p2;
    (*p2)++;
    p1 = p2;
    p2 = &b;
    *p1 *= *p2;
    ++(*p2);
    a = *p2 * *p1;
    p1 = &a;
    *p2 = *p1 /= *p2;
    
    return 0;
}</div>

        <p><strong>Remplir le tableau de chaque variable après chaque instruction :</strong></p>
        
        <table>
            <tr>
                <th>Instruction</th>
                <th>a</th>
                <th>b</th>
                <th>c</th>
                <th>p1</th>
                <th>p2</th>
            </tr>
            <tr>
                <td>init</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>?</td>
                <td>?</td>
            </tr>
            <tr>
                <td>p1 = &a;</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>&a</td>
                <td>?</td>
            </tr>
            <tr>
                <td>p2 = &c;</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>&a</td>
                <td>&c</td>
            </tr>
            <tr>
                <td>*p1 = *p2;</td>
                <td>3</td>
                <td>2</td>
                <td>3</td>
                <td>&a</td>
                <td>&c</td>
            </tr>
            <tr>
                <td>(*p2)++;</td>
                <td>3</td>
                <td>2</td>
                <td>4</td>
                <td>&a</td>
                <td>&c</td>
            </tr>
            <tr>
                <td>p1 = p2;</td>
                <td>3</td>
                <td>2</td>
                <td>4</td>
                <td>&c</td>
                <td>&c</td>
            </tr>
            <tr>
                <td>p2 = &b;</td>
                <td>3</td>
                <td>2</td>
                <td>4</td>
                <td>&c</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>*p1 *= *p2;</td>
                <td>3</td>
                <td>2</td>
                <td>8</td>
                <td>&c</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>++(*p2);</td>
                <td>3</td>
                <td>3</td>
                <td>8</td>
                <td>&c</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>a = *p2 * *p1;</td>
                <td>24</td>
                <td>3</td>
                <td>8</td>
                <td>&c</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>p1 = &a;</td>
                <td>24</td>
                <td>3</td>
                <td>8</td>
                <td>&a</td>
                <td>&b</td>
            </tr>
            <tr>
                <td>*p2 = *p1 /= *p2;</td>
                <td>8</td>
                <td>8</td>
                <td>8</td>
                <td>&a</td>
                <td>&b</td>
            </tr>
        </table>

        <div class="page-break"></div>

        <h2>Exercice 4 : Gestion de Stock avec Liste Chaînée</h2>
        
        <p>Étant donnée la structure suivante :</p>
        <p><strong>Produit</strong> défini par son nom, son code, sa catégorie, sa quantité et son prix unitaire. On souhaite gérer un stock de produits à l'aide d'une liste chaînée simplement.</p>
        
        <ol>
            <li>Définir la structure Produit et la structure de la liste chaînée.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">typedef struct {
    char nom[30];
    int code;
    char categorie[20];
    int quantite;
    float prix;
} Produit;</span>

<span style="color: red; font-weight: bold;">typedef struct Node {
    Produit p;
    struct Node *suiv;
} Node;</span>
</code>
</pre>
            <li>Écrire une fonction qui crée un nouveau produit.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">Produit creerProduit() {
    Produit p;
    scanf("%s %d %s %d %f", p.nom, &amp;p.code, p.categorie, &amp;p.quantite, &amp;p.prix);
    return p;
}</span>
</code>
</pre>
            <li>Écrire une fonction qui ajoute un produit en tête de la liste.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">Node* ajouterTete(Node *liste, Produit p) {
    Node *n = malloc(sizeof(Node));
    n->p = p;
    n->suiv = liste;
    return n;
}</span>
</code>
</pre>
            <li>Écrire une fonction qui affiche tous les produits.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">void afficher(Node *l) {
    while(l) {
        printf("%s %d %d %.2f\n", l->p.nom, l->p.code, l->p.quantite, l->p.prix);
        l = l->suiv;
    }
}</span>
</code>
</pre>
            <li>Écrire une fonction qui supprime un produit à partir de son code.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">Node* supprimer(Node *l, int code) {
    if (!l) return NULL;
    if (l->p.code == code) {
        Node *tmp = l->suiv;
        free(l);
        return tmp;
    }
    l->suiv = supprimer(l->suiv, code);
    return l;
}</span>
</code>
</pre>
            <li>Écrire une fonction qui calcule la valeur totale du stock (somme des quantité × prix_unitaire).</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">float valeurStock(Node *l) {
    float s = 0;
    while(l) {
        s += l->p.quantite * l->p.prix;
        l = l->suiv;
    }
    return s;
}</span>
</code>
</pre>      
  </ol>

        <div class="page-break"></div>
<h2>Exercice 5 : Gestion des Vols avec Tableau Dynamique</h2>

<p>On souhaite développer un programme de gestion des vols à l'aide d'un tableau dynamique. Chaque vol est défini par un numéro unique, une ville de départ, une ville d'arrivée, une date de départ, un nombre de places disponibles et un prix du billet.</p>

<ol>
    <li>Définir la structure <strong>Vol</strong> contenant les informations nécessaires.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">typedef struct {
    int num;
    char dep[20];
    char arr[20];
    char date[15];
    int places_total;
    int places_disp;
    float prix;
} Vol;</span>
</code>
</pre>

    <li>Écrire une fonction permettant de saisir un vol en respectant les contraintes :</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">void saisirVol(Vol *v) {
    do {
        printf("Numéro du vol : ");
        scanf("%d", &v->num);
    } while(v->num <= 0);

    printf("Ville de départ : ");
    scanf("%s", v->dep);
    printf("Ville d'arrivée : ");
    scanf("%s", v->arr);
    printf("Date de départ : ");
    scanf("%s", v->date);

    do {
        printf("Nombre total de places : ");
        scanf("%d", &v->places_total);
    } while(v->places_total <= 0);

    v->places_disp = v->places_total;

    do {
        printf("Prix du billet : ");
        scanf("%f", &v->prix);
    } while(v->prix <= 0);
}</span>
</code>
</pre>

    <li>Écrire une fonction qui calcule la recette d’un vol.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">float recette(Vol v) {
    return (v.places_total - v.places_disp) * v.prix;
}</span>
</code>
</pre>

    <li>Écrire une fonction qui renvoie le vol ayant généré la recette maximale.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">Vol maxRecette(Vol t[], int n) {
    int imax = 0;
    for(int i = 1; i &lt; n; i++)
        if(recette(t[i]) &gt; recette(t[imax])) imax = i;
    return t[imax];
}</span>
</code>
</pre>

    <li>Écrire une fonction qui calcule la recette totale de tous les vols.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">float recetteTotale(Vol t[], int n) {
    float total = 0;
    for(int i = 0; i &lt; n; i++)
        total += recette(t[i]);
    return total;
}</span>
</code>
</pre>

    <li>Écrire une fonction qui trie les vols par ordre décroissant de recette.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">void trier(Vol t[], int n) {
    for(int i = 0; i &lt; n-1; i++)
        for(int j = i+1; j &lt; n; j++)
            if(recette(t[j]) &gt; recette(t[i])) {
                Vol tmp = t[i];
                t[i] = t[j];
                t[j] = tmp;
            }
}</span>
</code>
</pre>

    <li>Écrire une fonction permettant de rechercher un vol par son numéro et d’afficher ses informations.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">void rechercherVol(Vol t[], int n, int num) {
    int trouve = 0;
    for(int i = 0; i &lt; n; i++) {
        if(t[i].num == num) {
            printf("Vol %d : %s -&gt; %s, Date: %s, Places dispo: %d, Prix: %.2f, Recette: %.2f\n",
                t[i].num, t[i].dep, t[i].arr, t[i].date,
                t[i].places_disp, t[i].prix, recette(t[i]));
            trouve = 1;
            break;
        }
    }
    if(!trouve) printf("Vol %d non trouvé.\n", num);
}</span>
</code>
</pre>

    <li>Écrire une fonction permettant de réserver des places sur un vol donné.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">void reserverPlaces(Vol *v, int nbre) {
    if(nbre &lt;= 0) {
        printf("Nombre de places invalide.\n");
        return;
    }
    if(nbre &gt; v->places_disp) {
        printf("Pas assez de places disponibles.\n");
        return;
    }
    v->places_disp -= nbre;
    printf("%d places réservées avec succès. Places restantes : %d\n", nbre, v->places_disp);
}</span>
</code>
</pre>

    <li>Écrire une fonction permettant de sauvegarder les vols dans un fichier texte <strong>vols.txt</strong>.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">void sauvegarder(Vol t[], int n) {
    FILE *f = fopen("vols.txt", "w");
    if(f == NULL) { printf("Erreur lors de l'ouverture du fichier.\n"); return; }
    for(int i = 0; i &lt; n; i++)
        fprintf(f, "%d %s %s %s %d %.2f %.2f\n",
            t[i].num, t[i].dep, t[i].arr, t[i].date,
            t[i].places_disp, t[i].prix, recette(t[i]));
    fclose(f);
    printf("Vols sauvegardés dans vols.txt\n");
}</span>
</code>
</pre>

    <li>Écrire le programme principal faisant appel à l'ensemble des sous-programmes précédents.</li>
<pre>
<code>
<span style="color: red; font-weight: bold;">int main() {
    int n;
    printf("Nombre de vols (max 30) : ");
    scanf("%d", &n);
    if(n &lt;= 0 || n &gt; 30) return 1;

    Vol vols[30];

    for(int i = 0; i &lt; n; i++) {
        printf("\n--- Vol %d ---\n", i+1);
        saisirVol(&vols[i]);
    }

    printf("\nListe des vols :\n");
    for(int i = 0; i &lt; n; i++)
        printf("%d : %s -&gt; %s, Date: %s, Places dispo: %d, Prix: %.2f, Recette: %.2f\n",
            vols[i].num, vols[i].dep, vols[i].arr, vols[i].date,
            vols[i].places_disp, vols[i].prix, recette(vols[i]));

    Vol vmax = maxRecette(vols, n);
    printf("\nVol avec recette maximale :\n");
    printf("%d : %s -&gt; %s, Recette: %.2f\n", vmax.num, vmax.dep, vmax.arr, recette(vmax));

    printf("\nRecette totale : %.2f\n", recetteTotale(vols, n));

    trier(vols, n);
    printf("\nVols triés par recette décroissante :\n");
    for(int i = 0; i &lt; n; i++)
        printf("%d : %s -&gt; %s, Recette: %.2f\n", vols[i].num, vols[i].dep, vols[i].arr,<br> recette(vols[i]));

    sauvegarder(vols, n);

    return

</body>
</html>
