    
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide Complet - Bases de Donn√©es Relationnelles</title>
    <link rel="icon" type="image/png" href="images.png">
    <style>
        @media print {
            body { margin: 0; }
            .no-print { display: none; }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .back-button {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 40px;
            margin: 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            text-decoration: none;
        }

        .back-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            background-color: #f8f9fa;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        section {
            margin-bottom: 50px;
            animation: fadeIn 0.6s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        h3 {
            color: #34495e;
            font-size: 1.5em;
            margin: 25px 0 15px;
            padding-left: 15px;
            border-left: 4px solid #764ba2;
        }

        h4 {
            color: #555;
            font-size: 1.2em;
            margin: 20px 0 10px;
        }

        p, li {
            margin-bottom: 12px;
            color: #555;
            font-size: 1em;
        }

        ul, ol {
            margin-left: 20px;
        }

        .example-box {
            background: #f8f9fa;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .example-box h4 {
            color: #667eea;
            margin-top: 0;
        }

        .schema-diagram {
            background: white;
            border: 2px solid #ddd;
            padding: 25px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .schema-diagram img {
            max-width: 100%;
            height: auto;
        }

        .entity {
            display: inline-block;
            border: 2px solid #2c3e50;
            padding: 15px 25px;
            margin: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            font-weight: bold;
        }

        .association {
            display: inline-block;
            border: 2px solid #e74c3c;
            padding: 10px 20px;
            margin: 10px;
            background: #fadbd8;
            border-radius: 50%;
            font-style: italic;
        }

        code {
            background: #2c3e50;
            color: #f8f9fa;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            word-wrap: break-word;
        }

        pre {
            background: #2c3e50;
            color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        pre code {
            background: none;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: block;
            overflow-x: auto;
        }

        th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        tr:hover {
            background: #e3f2fd;
            transition: background 0.3s ease;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .formula {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            border-radius: 5px;
            overflow-x: auto;
        }

        .tip {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .tip::before {
            content: "üí° Astuce : ";
            font-weight: bold;
            color: #2196f3;
        }

        .warning {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .warning::before {
            content: "‚ö†Ô∏è Attention : ";
            font-weight: bold;
            color: #ff9800;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                border-radius: 10px;
            }

            .back-button {
                width: calc(100% - 40px);
                margin: 20px;
                padding: 12px 25px;
                font-size: 16px;
                justify-content: center;
            }

            header {
                padding: 25px 20px;
            }

            header h1 {
                font-size: 1.8em;
            }

            header p {
                font-size: 1em;
            }

            .content {
                padding: 25px 20px;
            }

            h2 {
                font-size: 1.5em;
                margin-bottom: 15px;
            }

            h3 {
                font-size: 1.3em;
                margin: 20px 0 12px;
                padding-left: 12px;
            }

            h4 {
                font-size: 1.1em;
            }

            p, li {
                font-size: 0.95em;
            }

            .example-box {
                padding: 15px;
                margin: 15px 0;
            }

            .schema-diagram {
                padding: 15px;
            }

            .entity, .association {
                display: block;
                margin: 10px 0;
            }

            code {
                font-size: 0.85em;
            }

            pre {
                padding: 15px;
                font-size: 0.85em;
            }

            table {
                font-size: 0.85em;
            }

            th, td {
                padding: 10px 8px;
            }

            .card {
                padding: 15px;
            }

            .formula {
                padding: 12px;
                font-size: 0.9em;
            }

            .tip, .warning {
                padding: 12px;
                font-size: 0.95em;
            }
        }

        @media (max-width: 480px) {
            header h1 {
                font-size: 1.5em;
            }

            header p {
                font-size: 0.9em;
            }

            .content {
                padding: 20px 15px;
            }

            h2 {
                font-size: 1.3em;
            }

            h3 {
                font-size: 1.15em;
                padding-left: 10px;
            }

            h4 {
                font-size: 1em;
            }

            p, li {
                font-size: 0.9em;
            }

            .example-box {
                padding: 12px;
            }

            .schema-diagram {
                padding: 10px;
            }

            code {
                font-size: 0.8em;
            }

            pre {
                padding: 12px;
                font-size: 0.8em;
            }

            table {
                font-size: 0.8em;
            }

            th, td {
                padding: 8px 5px;
            }

            .card {
                padding: 12px;
            }

            .formula {
                padding: 10px;
                font-size: 0.85em;
            }
        }

        /* Am√©lioration de la lisibilit√© sur petit √©cran */
        @media (max-width: 480px) {
            ul, ol {
                margin-left: 15px;
            }

            .entity {
                font-size: 0.9em;
                padding: 10px 15px;
            }

            .association {
                font-size: 0.9em;
                padding: 8px 15px;
            }
        }
    </style>
        
</head>
<body>
    <div class="container">
             <a href="index.html" style="text-decoration: none;">
            <button class="back-button">‚Üê Retour √† l'accueil</button>
        </a>
        
        <header>
            <h1>üìö Guide Complet des Bases de Donn√©es Relationnelles</h1>
            <p>De la Conception √† l'Impl√©mentation SQL</p>
        </header>

        <div class="content">
            <!-- Section 1 : Mod√®le Entit√©-Association -->
            <section id="mea">
                <h2>1. Conception : Le Mod√®le Entit√©-Association (MEA)</h2>
                
                <p>Le sch√©ma conceptuel est le r√©sultat de la mod√©lisation du syst√®me d'information, r√©alis√©e <strong>ind√©pendamment de l'impl√©mentation machine</strong>.</p>

                <h3>Concepts Fondamentaux</h3>

                <div class="card">
                    <h4>üî∑ Entit√©</h4>
                    <p>Repr√©sentation d'un objet du monde r√©el (concret ou abstrait) ayant une existence propre et pouvant √™tre identifi√© distinctement.</p>
                    <p><strong>Repr√©sentation graphique :</strong> Un <span class="highlight">rectangle</span></p>
                </div>

                <div class="card">
                    <h4>üîπ Attribut (Propri√©t√©)</h4>
                    <p>Caract√©ristique atomique d'une entit√© ou d'une association. L'<strong>identifiant (cl√©)</strong> est <u>soulign√©</u>.</p>
                </div>

                <div class="card">
                    <h4>üî∂ Association</h4>
                    <p>Lien ayant un sens d√©termin√© entre plusieurs entit√©s (souvent un verbe).</p>
                    <p><strong>Repr√©sentation graphique :</strong> Un <span class="highlight">losange ou ellipse</span></p>
                </div>

                <div class="card">
                    <h4>üìä Cardinalit√©s</h4>
                    <p>Couple (min, max) caract√©risant le lien :</p>
                    <ul>
                        <li><strong>Min (0 ou 1) :</strong> Nombre minimum de participations d'une entit√©</li>
                        <li><strong>Max (1 ou n) :</strong> Nombre maximum de participations</li>
                    </ul>
                </div>

                <div class="example-box">
                    <h4>üìã Exemple : Syst√®me d'Assurance Auto</h4>
                    <div class="schema-diagram">
                        <div class="entity">CLIENT<br><u>idClient</u>, nom, pr√©nom, adresse</div>
                        <span style="font-size: 1.5em; margin: 0 10px;">1,n</span>
                        <div class="association">poss√®de</div>
                        <span style="font-size: 1.5em; margin: 0 10px;">0,n</span>
                        <div class="entity">CONTRAT<br><u>numContrat</u>, dateDebut, prime</div>
                    </div>
                    <div class="schema-diagram">
                        <div class="entity">V√âHICULE<br><u>immatriculation</u>, marque, mod√®le</div>
                        <span style="font-size: 1.5em; margin: 0 10px;">1,n</span>
                        <div class="association">impliqu√©</div>
                        <span style="font-size: 1.5em; margin: 0 10px;">0,n</span>
                        <div class="entity">SINISTRE<br><u>numSinistre</u>, date, montant</div>
                    </div>
                    <p><strong>Interpr√©tation :</strong></p>
                    <ul>
                        <li>Un client peut poss√©der 1 ou plusieurs contrats (1,n)</li>
                        <li>Un contrat est associ√© √† 0 ou plusieurs v√©hicules (0,n)</li>
                        <li>Un v√©hicule peut √™tre impliqu√© dans 0 ou plusieurs sinistres</li>
                    </ul>
                </div>
            </section>

            <!-- Section 2 : Mod√®le Relationnel -->
            <section id="relationnel">
                <h2>2. Passage au Mod√®le Relationnel & Normalisation</h2>

                <h3>R√®gles de Transformation</h3>

                <div class="card">
                    <h4>R√®gle 1 : Entit√©s ‚Üí Tables</h4>
                    <p>Toute entit√© devient une <strong>relation (table)</strong>. L'identifiant devient la <strong>cl√© primaire</strong>.</p>
                    <div class="example-box">
                        <p><strong>Entit√© MEA :</strong> CLIENT(<u>idClient</u>, nom, pr√©nom)</p>
                        <p><strong>Table SQL :</strong></p>
                        <pre><code>CREATE TABLE Client (
    idClient INT PRIMARY KEY,
    nom VARCHAR(50),
    prenom VARCHAR(50)
);</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>R√®gle 2 : Associations (n:n) ‚Üí Table</h4>
                    <p>Si les deux c√¥t√©s ont une cardinalit√© max "n", l'association devient une nouvelle table. Sa cl√© primaire est la <strong>concat√©nation</strong> des cl√©s des entit√©s li√©es.</p>
                    <div class="example-box">
                        <p><strong>Exemple :</strong> √âTUDIANT (n:n) INSCRIPTION (n:n) COURS</p>
                        <pre><code>CREATE TABLE Inscription (
    idEtudiant INT,
    idCours INT,
    dateInscription DATE,
    PRIMARY KEY (idEtudiant, idCours),
    FOREIGN KEY (idEtudiant) REFERENCES Etudiant(idEtudiant),
    FOREIGN KEY (idCours) REFERENCES Cours(idCours)
);</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>R√®gle 3 : Associations (1:n / 1:1) ‚Üí Cl√© √âtrang√®re</h4>
                    <p>La cl√© de l'entit√© c√¥t√© "1" (ou "0,1") migre comme <strong>cl√© √©trang√®re</strong> dans la table de l'entit√© oppos√©e.</p>
                    <div class="example-box">
                        <p><strong>Exemple :</strong> D√âPARTEMENT (1) ‚Üê‚Üí (n) EMPLOY√â</p>
                        <pre><code>CREATE TABLE Employe (
    idEmploye INT PRIMARY KEY,
    nom VARCHAR(50),
    idDepartement INT,
    FOREIGN KEY (idDepartement) REFERENCES Departement(idDepartement)
);</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>R√®gle 4 : Associations n-aires ‚Üí Table</h4>
                    <p>Les associations impliquant 3 entit√©s ou plus deviennent syst√©matiquement une relation.</p>
                    <div class="example-box">
                        <p><strong>Exemple :</strong> FOURNISSEUR - PRODUIT - PROJET</p>
                        <pre><code>CREATE TABLE Approvisionnement (
    idFournisseur INT,
    idProduit INT,
    idProjet INT,
    quantite INT,
    PRIMARY KEY (idFournisseur, idProduit, idProjet)
);</code></pre>
                    </div>
                </div>

                <h3>Normalisation (√âviter la Redondance)</h3>

                <div class="tip">
                    La normalisation permet d'√©liminer les anomalies d'insertion, de modification et de suppression.
                </div>

                <div class="card">
                    <h4>1FN (Premi√®re Forme Normale)</h4>
                    <p>‚úì Valeurs atomiques (pas de listes ou de tableaux)</p>
                    <p>‚úì Cl√© primaire identifi√©e</p>
                    <div class="example-box">
                        <p><strong>‚ùå Non conforme 1FN :</strong></p>
                        <table>
                            <tr><th>idClient</th><th>T√©l√©phones</th></tr>
                            <tr><td>1</td><td>06123, 07456</td></tr>
                        </table>
                        <p><strong>‚úì Conforme 1FN :</strong></p>
                        <table>
                            <tr><th>idClient</th><th>T√©l√©phone</th></tr>
                            <tr><td>1</td><td>06123</td></tr>
                            <tr><td>1</td><td>07456</td></tr>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <h4>2FN (Deuxi√®me Forme Normale)</h4>
                    <p>‚úì 1FN respect√©e</p>
                    <p>‚úì Tous les attributs d√©pendent de la <strong>totalit√©</strong> de la cl√© primaire</p>
                    <div class="example-box">
                        <p><strong>‚ùå Non conforme 2FN :</strong></p>
                        <p>COMMANDE(<u>idCommande, idProduit</u>, nomProduit, quantit√©)</p>
                        <p>‚Üí nomProduit d√©pend seulement de idProduit, pas de la cl√© compl√®te</p>
                        <p><strong>‚úì Solution :</strong> S√©parer en deux tables</p>
                    </div>
                </div>

                <div class="card">
                    <h4>3FN (Troisi√®me Forme Normale)</h4>
                    <p>‚úì 2FN respect√©e</p>
                    <p>‚úì Aucun attribut non-cl√© ne d√©pend d'un autre attribut non-cl√© (pas de d√©pendance transitive)</p>
                    <div class="example-box">
                        <p><strong>‚ùå Non conforme 3FN :</strong></p>
                        <p>EMPLOY√â(<u>idEmploy√©</u>, nom, codePostal, ville)</p>
                        <p>‚Üí ville d√©pend de codePostal (d√©pendance transitive)</p>
                        <p><strong>‚úì Solution :</strong> Cr√©er une table VILLE(codePostal, ville)</p>
                    </div>
                </div>
            </section>

            <!-- Section 3 : Alg√®bre Relationnelle -->
            <section id="algebre">
                <h2>3. Alg√®bre Relationnelle</h2>

                <p>L'alg√®bre est un langage <strong>proc√©dural</strong> o√π le r√©sultat de chaque op√©ration est une nouvelle relation.</p>

                <h3>Op√©rations Unaires</h3>

                <div class="card">
                    <h4>üîç S√©lection (œÉ)</h4>
                    <div class="formula">R = œÉ<sub>condition</sub>(Relation)</div>
                    <p>Filtre les tuples (lignes) v√©rifiant un pr√©dicat.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Trouver tous les clients dont l'√¢ge est sup√©rieur √† 30 ans</p>
                        <div class="formula">œÉ<sub>√¢ge > 30</sub>(CLIENT)</div>
                        <table>
                            <tr><th>idClient</th><th>nom</th><th>√¢ge</th></tr>
                            <tr><td>1</td><td>Dupont</td><td>35</td></tr>
                            <tr><td>3</td><td>Martin</td><td>42</td></tr>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <h4>üìã Projection (œÄ)</h4>
                    <div class="formula">R = œÄ<sub>colonne1, colonne2</sub>(Relation)</div>
                    <p>Extrait certaines colonnes et supprime les doublons.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Afficher uniquement les noms des clients</p>
                        <div class="formula">œÄ<sub>nom</sub>(CLIENT)</div>
                        <table>
                            <tr><th>nom</th></tr>
                            <tr><td>Dupont</td></tr>
                            <tr><td>Bernard</td></tr>
                            <tr><td>Martin</td></tr>
                        </table>
                    </div>
                </div>

                <h3>Op√©rations Ensemblistes</h3>

                <div class="warning">
                    Les relations doivent imp√©rativement avoir le <strong>m√™me sch√©ma</strong> (m√™me ordre de colonnes, m√™me degr√©, m√™me type de donn√©es respectif).
                </div>

                <div class="card">
                    <h4>‚à™ Union</h4>
                    <div class="formula">R = R1 ‚à™ R2</div>
                    <p>Contient tous les tuples de R1 et R2 sans doublons. Commutative et associative.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Clients Paris :</strong> {Alice, Bob}</p>
                        <p><strong>Clients Lyon :</strong> {Bob, Charlie}</p>
                        <p><strong>R√©sultat :</strong> {Alice, Bob, Charlie}</p>
                    </div>
                </div>

                <div class="card">
                    <h4>‚à© Intersection</h4>
                    <div class="formula">R = R1 ‚à© R2</div>
                    <p>Tuples pr√©sents √† la fois dans R1 et R2.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Clients Paris :</strong> {Alice, Bob}</p>
                        <p><strong>Clients ayant command√© :</strong> {Bob, Charlie}</p>
                        <p><strong>R√©sultat :</strong> {Bob}</p>
                    </div>
                </div>

                <div class="card">
                    <h4>‚àí Diff√©rence</h4>
                    <div class="formula">R = R1 ‚àí R2</div>
                    <p>Tuples de R1 qui ne sont pas dans R2. <strong>Non commutative</strong>.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Tous les clients :</strong> {Alice, Bob, Charlie}</p>
                        <p><strong>Clients ayant command√© :</strong> {Bob}</p>
                        <p><strong>Clients sans commande :</strong> {Alice, Charlie}</p>
                    </div>
                </div>

                <h3>Produit Cart√©sien & Jointures</h3>

                <div class="card">
                    <h4>√ó Produit Cart√©sien</h4>
                    <div class="formula">R = R1 √ó R2</div>
                    <p>Concat√©nation de tous les tuples.</p>
                    <div class="formula">
                        degr√©(R) = degr√©(R1) + degr√©(R2)<br>
                        lignes(R) = lignes(R1) √ó lignes(R2)
                    </div>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Couleurs :</strong> {Rouge, Bleu}</p>
                        <p><strong>Tailles :</strong> {S, M, L}</p>
                        <p><strong>R√©sultat :</strong> 2 √ó 3 = 6 combinaisons</p>
                        <p>{(Rouge,S), (Rouge,M), (Rouge,L), (Bleu,S), (Bleu,M), (Bleu,L)}</p>
                    </div>
                </div>

                <div class="card">
                    <h4>‚ãà Œ∏-Jointure</h4>
                    <div class="formula">R = R1 ‚ãà<sub>condition</sub> R2</div>
                    <p>Bas√©e sur une condition de comparaison (&lt;, ‚â§, &gt;, ‚â•, =, ‚â†).</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Employ√©s gagnant plus que leur manager</p>
                        <div class="formula">EMPLOY√â ‚ãà<sub>EMPLOY√â.salaire > MANAGER.salaire</sub> MANAGER</div>
                    </div>
                </div>

                <div class="card">
                    <h4>‚ãà √âqui-jointure</h4>
                    <p>Jointure o√π la condition est l'√©galit√© (R1.ai = R2.bj).</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Clients avec leurs commandes</p>
                        <div class="formula">CLIENT ‚ãà<sub>CLIENT.id = COMMANDE.idClient</sub> COMMANDE</div>
                    </div>
                </div>

                <div class="card">
                    <h4>‚àó Jointure Naturelle</h4>
                    <div class="formula">R = R1 ‚àó R2</div>
                    <p>√âqui-jointure sur les attributs de m√™me nom, supprimant les colonnes r√©p√©t√©es.</p>
                    <div class="formula">degr√©(R) = degr√©(R1) + degr√©(R2) ‚àí 1 (par couple identique)</div>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>CLIENT :</strong> (idClient, nom)</p>
                        <p><strong>COMMANDE :</strong> (idCommande, idClient, montant)</p>
                        <p><strong>R√©sultat :</strong> (idClient, nom, idCommande, montant)</p>
                    </div>
                </div>

                <div class="card">
                    <h4>√∑ Division</h4>
                    <div class="formula">R = R1 √∑ R2</div>
                    <p>Utilis√©e pour les requ√™tes de type <strong>"Tous"</strong>.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Quels clients ont achet√© <strong>tous</strong> les produits ?</p>
                        <p><strong>ACHAT(idClient, idProduit)</strong></p>
                        <p><strong>PRODUIT(idProduit)</strong></p>
                        <div class="formula">ACHAT √∑ PRODUIT</div>
                        <p>Retourne les clients ayant achet√© chaque produit de la table PRODUIT.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4 : SQL -->
            <section id="sql">
                <h2>4. Langage SQL (LID)</h2>

                <p>Le SQL traduit l'alg√®bre relationnelle en requ√™tes textuelles.</p>

                <h3>Structure d'une Requ√™te SELECT</h3>

                <pre><code>SELECT [DISTINCT] colonnes    -- Projection
FROM tables                   -- Origine des donn√©es
WHERE conditions              -- S√©lection et Jointures
GROUP BY colonnes             -- Groupement pour agr√©gats
HAVING condition_groupe       -- Filtre sur les agr√©gats
ORDER BY colonne ASC/DESC;    -- Tri du r√©sultat</code></pre>

                <div class="example-box">
                    <h4>Exemple Complet</h4>
                    <p><strong>Question :</strong> Afficher les d√©partements ayant plus de 5 employ√©s, tri√©s par nombre d'employ√©s d√©croissant</p>
                    <pre><code>SELECT d.nomDepartement, COUNT(e.idEmploye) AS nbEmployes
FROM Departement d
INNER JOIN Employe e ON d.idDepartement = e.idDepartement
GROUP BY d.nomDepartement
HAVING COUNT(e.idEmploye) > 5
ORDER BY nbEmployes DESC;</code></pre>
                </div>

                <h3>Fonctions d'Agr√©gation</h3>

                <table>
                    <tr>
                        <th>Fonction</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>COUNT</code></td>
                        <td>D√©nombrement de lignes</td>
                        <td><code>SELECT COUNT(*) FROM Client;</code></td>
                    </tr>
                    <tr>
                        <td><code>MIN / MAX</code></td>
                        <td>Valeurs minimale / maximale</td>
                        <td><code>SELECT MAX(salaire) FROM Employe;</code></td>
                    </tr>
                    <tr>
                        <td><code>AVG</code></td>
                        <td>Moyenne des valeurs</td>
                        <td><code>SELECT AVG(prix) FROM Produit;</code></td>
                    </tr>
                    <tr>
                        <td><code>SUM</code></td>
                        <td>Somme des valeurs</td>
                        <td><code>SELECT SUM(montant) FROM Commande;</code></td>
                    </tr>
                </table>

                <h3>Types de Jointures SQL</h3>

                <div class="card">
                    <h4>INNER JOIN (Jointure Interne)</h4>
                    <p>Retourne uniquement les lignes ayant une correspondance dans les deux tables.</p>
                    <div class="example-box">
                        <p><strong>Ancienne syntaxe :</strong></p>
                        <pre><code>SELECT * 
FROM Client c, Commande cmd 
WHERE c.idClient = cmd.idClient;</code></pre>
                        <p><strong>Syntaxe moderne (norme SQL) :</strong></p>
                        <pre><code>SELECT * 
FROM Client c 
INNER JOIN Commande cmd ON c.idClient = cmd.idClient;</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>LEFT OUTER JOIN (Jointure Externe Gauche)</h4>
                    <p>Inclut toutes les lignes de la table gauche, m√™me si elles n'ont pas de correspondance dans la table droite. Les valeurs manquantes sont compl√©t√©es par NULL.</p>
                    <div class="example-box">
                        <pre><code>SELECT c.nom, cmd.numCommande, cmd.montant
FROM Client c 
LEFT OUTER JOIN Commande cmd ON c.idClient = cmd.idClient;</code></pre>
                        <p><strong>R√©sultat :</strong> Tous les clients sont affich√©s, m√™me ceux sans commande (montant = NULL)</p>
                    </div>
                </div>

                <div class="card">
                    <h4>RIGHT OUTER JOIN (Jointure Externe Droite)</h4>
                    <p>Inclut toutes les lignes de la table droite, compl√©t√©es par NULL si n√©cessaire.</p>
                </div>

                <h3>Concepts de S√©lection Avanc√©s</h3>

                <div class="card">
                    <h4>LIKE - Recherche de Motifs</h4>
                    <p>Permet de rechercher des motifs dans les cha√Ænes de caract√®res.</p>
                    <ul>
                        <li><code>%</code> : Remplace z√©ro ou plusieurs caract√®res</li>
                        <li><code>_</code> : Remplace exactement un caract√®re</li>
                    </ul>
                    <div class="example-box">
                        <pre><code>-- Clients dont le nom commence par 'Dup'
SELECT * FROM Client WHERE nom LIKE 'Dup%';

-- Clients avec exactement 5 lettres dans le nom
SELECT * FROM Client WHERE nom LIKE '_____';

-- Clients contenant 'art' dans le nom
SELECT * FROM Client WHERE nom LIKE '%art%';</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>BETWEEN - Intervalles</h4>
                    <p>Teste si une valeur est comprise dans un intervalle (inclusif).</p>
                    <div class="example-box">
                        <pre><code>-- Employ√©s avec salaire entre 2000 et 4000
SELECT * FROM Employe 
WHERE salaire BETWEEN 2000 AND 4000;

-- Commandes de janvier 2024
SELECT * FROM Commande 
WHERE dateCommande BETWEEN '2024-01-01' AND '2024-01-31';</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>IN - Appartenance √† une Liste</h4>
                    <p>V√©rifie si une valeur appartient √† une liste de valeurs.</p>
                    <div class="example-box">
                        <pre><code>-- Clients de Paris, Lyon ou Marseille
SELECT * FROM Client 
WHERE ville IN ('Paris', 'Lyon', 'Marseille');

-- √âquivalent √† :
SELECT * FROM Client 
WHERE ville = 'Paris' OR ville = 'Lyon' OR ville = 'Marseille';</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>IS NULL - Test de Valeur Nulle</h4>
                    <p>Teste si un champ est vide (NULL).</p>
                    <div class="example-box">
                        <pre><code>-- Employ√©s sans manager assign√©
SELECT * FROM Employe WHERE idManager IS NULL;

-- Clients ayant renseign√© leur email
SELECT * FROM Client WHERE email IS NOT NULL;</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>EXISTS - Test d'Existence</h4>
                    <p>Renvoie vrai si une sous-requ√™te produit au moins une ligne.</p>
                    <div class="example-box">
                        <pre><code>-- Clients ayant au moins une commande
SELECT c.nom 
FROM Client c
WHERE EXISTS (
    SELECT 1 FROM Commande cmd 
    WHERE cmd.idClient = c.idClient
);

-- Produits jamais command√©s
SELECT p.nomProduit 
FROM Produit p
WHERE NOT EXISTS (
    SELECT 1 FROM LigneCommande lc 
    WHERE lc.idProduit = p.idProduit
);</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section 5 : Exercices d'Alg√®bre Relationnelle -->
            <section id="exercice-algebre">
                <h2>5. Exercices d'Alg√®bre Relationnelle</h2>

                <div class="card">
                    <h3>üìö Exercice 1 : Gestion des Employ√©s</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>EMP(ENO, ENOM, PROF, DATEEMB, SAL, COMM, #DNO)
DEPT(DNO, DNOM, #DIR, VILLE)</code></pre>
                    
                    <table>
                        <tr>
                            <th>Attribut</th>
                            <th>Description</th>
                        </tr>
                        <tr><td>ENO</td><td>Num√©ro d'employ√© (cl√©)</td></tr>
                        <tr><td>ENOM</td><td>Nom de l'employ√©</td></tr>
                        <tr><td>PROF</td><td>Profession</td></tr>
                        <tr><td>DATEEMB</td><td>Date d'embauche</td></tr>
                        <tr><td>SAL</td><td>Salaire</td></tr>
                        <tr><td>COMM</td><td>Commission</td></tr>
                        <tr><td>DNO</td><td>Num√©ro de d√©partement (cl√©)</td></tr>
                        <tr><td>DNOM</td><td>Nom du d√©partement</td></tr>
                        <tr><td>DIR</td><td>Directeur du d√©partement</td></tr>
                        <tr><td>VILLE</td><td>Lieu du d√©partement</td></tr>
                    </table>
                </div>

                <h3>Solutions en Alg√®bre Relationnelle</h3>

                <div class="example-box">
                    <h4>Question 1 : Employ√©s avec salaire < 5000 et commission > 2000</h4>
                    <div class="formula">œÉ<sub>SAL &lt; 5000 ‚àß COMM &gt; 2000</sub>(EMP)</div>
                </div>

                <div class="example-box">
                    <h4>Question 2 : Nom et salaire des Ing√©nieurs embauch√©s apr√®s 10 F√©v 85</h4>
                    <div class="formula">œÄ<sub>ENOM, SAL</sub>(œÉ<sub>PROF = 'Ing√©nieur' ‚àß DATEEMB &gt; '10/02/85'</sub>(EMP))</div>
                </div>

                <div class="example-box">
                    <h4>Question 3 : Employ√©s du d√©partement 3 avec salaire ‚â• employ√© n¬∞30</h4>
                    <div class="formula">
                        Temp ‚Üê œÄ<sub>SAL</sub>(œÉ<sub>ENO = 30</sub>(EMP))<br>
                        œÉ<sub>DNO = 3 ‚àß SAL ‚â• Temp.SAL</sub>(EMP)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 4 : Pour chaque d√©partement, son nom et le nom de son directeur</h4>
                    <div class="formula">
                        R ‚Üê DEPT ‚ãà<sub>DEPT.DIR = EMP.ENO</sub> EMP<br>
                        œÄ<sub>DNOM, ENOM</sub>(R)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 5 : Pour chaque employ√©, son nom et la ville de son d√©partement</h4>
                    <div class="formula">œÄ<sub>ENOM, VILLE</sub>(EMP ‚ãà<sub>EMP.DNO = DEPT.DNO</sub> DEPT)</div>
                </div>

                <div class="example-box">
                    <h4>Question 6 : Employ√©s du d√©partement dont la ville est Boston</h4>
                    <div class="formula">
                        DeptBoston ‚Üê œÄ<sub>DNO</sub>(œÉ<sub>VILLE = 'Boston'</sub>(DEPT))<br>
                        EMP ‚ãà DeptBoston
                    </div>
                </div>

                <div class="card">
                    <h3>üì¶ Exercice 2 : Gestion de Redistribution de Produits</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>FOURNISSEUR(N¬∞FOUR, NOM, ADRESSE, VILLE)
PRODUIT(N¬∞PROD, DESIGNATION, PRIX, POIDS, COULEUR)
COMMANDE(N¬∞CMDE, #N¬∞FOUR, #N¬∞PROD, QUANTIT√â)</code></pre>
                </div>

                <h3>Solutions en Alg√®bre Relationnelle</h3>

                <div class="example-box">
                    <h4>Question 1 : D√©signation des produits pesant > 5 Kilos et de couleur Bleu</h4>
                    <div class="formula">œÄ<sub>DESIGNATION</sub>(œÉ<sub>POIDS &gt; 5 ‚àß COULEUR = 'Bleu'</sub>(PRODUIT))</div>
                </div>

                <div class="example-box">
                    <h4>Question 2 : Produits ayant le m√™me prix et la m√™me couleur</h4>
                    <div class="formula">
                        P1 ‚Üê œÅ(P1)(PRODUIT)<br>
                        P2 ‚Üê œÅ(P2)(PRODUIT)<br>
                        œÉ<sub>P1.N¬∞PROD ‚â† P2.N¬∞PROD ‚àß P1.PRIX = P2.PRIX ‚àß P1.COULEUR = P2.COULEUR</sub>(P1 √ó P2)
                    </div>
                    <p><small>œÅ : op√©rateur de renommage pour cr√©er des alias</small></p>
                </div>

                <div class="example-box">
                    <h4>Question 3 : Fournisseurs ayant eu des commandes</h4>
                    <div class="formula">œÄ<sub>N¬∞FOUR, NOM, ADRESSE, VILLE</sub>(FOURNISSEUR ‚ãà COMMANDE)</div>
                    <p><strong>Ou plus simplement :</strong></p>
                    <div class="formula">FOURNISSEUR ‚ãà COMMANDE</div>
                </div>

                <div class="example-box">
                    <h4>Question 4 : Quantit√©s d'armoires command√©es et noms de leurs fournisseurs</h4>
                    <div class="formula">
                        Armoires ‚Üê œÉ<sub>DESIGNATION = 'Armoire'</sub>(PRODUIT)<br>
                        R ‚Üê COMMANDE ‚ãà Armoires ‚ãà FOURNISSEUR<br>
                        œÄ<sub>NOM, QUANTIT√â</sub>(R)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 5 : Ville du fournisseur et d√©signation du produit de la commande n¬∞117</h4>
                    <div class="formula">
                        C117 ‚Üê œÉ<sub>N¬∞CMDE = 117</sub>(COMMANDE)<br>
                        R ‚Üê C117 ‚ãà FOURNISSEUR ‚ãà PRODUIT<br>
                        œÄ<sub>VILLE, DESIGNATION</sub>(R)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 6 : D√©signation et prix des produits fournis par les fournisseurs de Tunis</h4>
                    <div class="formula">
                        FourTunis ‚Üê œÄ<sub>N¬∞FOUR</sub>(œÉ<sub>VILLE = 'Tunis'</sub>(FOURNISSEUR))<br>
                        CmdTunis ‚Üê COMMANDE ‚ãà FourTunis<br>
                        R ‚Üê CmdTunis ‚ãà PRODUIT<br>
                        œÄ<sub>DESIGNATION, PRIX</sub>(R)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 7 : Fournisseur ayant command√© TOUS les produits (Division)</h4>
                    <div class="formula">
                        Temp ‚Üê œÄ<sub>N¬∞FOUR, N¬∞PROD</sub>(COMMANDE)<br>
                        AllProd ‚Üê œÄ<sub>N¬∞PROD</sub>(PRODUIT)<br>
                        ResultFour ‚Üê Temp √∑ AllProd<br>
                        FOURNISSEUR ‚ãà ResultFour
                    </div>
                    <div class="tip">
                        La division permet de trouver les fournisseurs qui ont command√© l'ensemble complet des produits.
                    </div>
                </div>
            </section>

            <!-- Section 6 : Exercices SQL -->
            <section id="exercice-sql">
                <h2>6. Exercices Pratiques SQL</h2>

                <div class="card">
                    <h3>‚úàÔ∏è Exercice 1 : Pilotes-Avions-Vols</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>Pilote(numP, nomP, prenomP, ville, salaire)
Avion(numAv, typeAv, capacite, localisation)
Vol(numVol, #numP, #numAv, villeDep, villeAr)</code></pre>
                </div>

                <h3>Cr√©ation des Tables (LDD)</h3>

                <div class="example-box">
                    <h4>Cr√©ation avec Contraintes</h4>
                    <pre><code>CREATE TABLE Pilote (
    numP NUMBER(8) PRIMARY KEY,
    nomP VARCHAR2(20) NOT NULL,
    prenomP VARCHAR2(20),
    ville VARCHAR2(30),
    salaire NUMBER NOT NULL
);

CREATE TABLE Avion (
    numAv NUMBER(6) PRIMARY KEY,
    typeAv VARCHAR2(30),
    capacite NUMBER(6),
    localisation VARCHAR2(30)
);

CREATE TABLE Vol (
    numVol NUMBER(4) PRIMARY KEY,
    numP NUMBER(8) NOT NULL,
    numAv NUMBER(6) NOT NULL,
    villeDep VARCHAR2(25),
    villeAr VARCHAR2(25),
    FOREIGN KEY (numP) REFERENCES Pilote(numP),
    FOREIGN KEY (numAv) REFERENCES Avion(numAv)
);</code></pre>
                </div>

                <h3>Requ√™tes SQL (Solutions)</h3>

                <div class="example-box">
                    <h4>a. Tous les vols</h4>
                    <pre><code>SELECT * FROM Vol;</code></pre>
                </div>

                <div class="example-box">
                    <h4>b. Pilotes avec salaire entre 6200 et 6500</h4>
                    <pre><code>SELECT nomP, prenomP, salaire 
FROM Pilote 
WHERE salaire BETWEEN 6200 AND 6500;</code></pre>
                </div>

                <div class="example-box">
                    <h4>c. Pilotes les mieux pay√©s</h4>
                    <pre><code>SELECT nomP, prenomP, salaire 
FROM Pilote 
WHERE salaire = (SELECT MAX(salaire) FROM Pilote);</code></pre>
                </div>

                <div class="example-box">
                    <h4>d. Avions localis√©s √† Paris</h4>
                    <pre><code>SELECT * FROM Avion WHERE localisation = 'Paris';</code></pre>
                </div>

                <div class="example-box">
                    <h4>e. Avions dans la m√™me ville que le pilote 'Sami'</h4>
                    <pre><code>SELECT numAv, typeAv, capacite, localisation
FROM Avion
WHERE localisation = (
    SELECT ville FROM Pilote WHERE prenomP = 'Sami'
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>f. Caract√©ristiques du vol num√©ro 714</h4>
                    <pre><code>SELECT v.numVol, v.villeDep, v.villeAr, a.typeAv, p.nomP
FROM Vol v
INNER JOIN Avion a ON v.numAv = a.numAv
INNER JOIN Pilote p ON v.numP = p.numP
WHERE v.numVol = 714;</code></pre>
                </div>

                <div class="example-box">
                    <h4>g. Num√©ro et type des avions affect√©s √† des vols</h4>
                    <pre><code>SELECT DISTINCT a.numAv, a.typeAv
FROM Avion a
INNER JOIN Vol v ON a.numAv = v.numAv;</code></pre>
                </div>

                <div class="example-box">
                    <h4>h. Nombre total de vols</h4>
                    <pre><code>SELECT COUNT(*) AS nombreVols FROM Vol;</code></pre>
                </div>

                <div class="example-box">
                    <h4>i. Avions non affect√©s √† des vols (3 m√©thodes)</h4>
                    <p><strong>M√©thode 1 : Requ√™te non synchrone (sous-requ√™te)</strong></p>
                    <pre><code>SELECT * FROM Avion
WHERE numAv NOT IN (SELECT numAv FROM Vol);</code></pre>
                    
                    <p><strong>M√©thode 2 : Requ√™te synchrone (EXISTS)</strong></p>
                    <pre><code>SELECT * FROM Avion a
WHERE NOT EXISTS (
    SELECT 1 FROM Vol v WHERE v.numAv = a.numAv
);</code></pre>
                    
                    <p><strong>M√©thode 3 : Soustraction (MINUS)</strong></p>
                    <pre><code>SELECT numAv FROM Avion
MINUS
SELECT numAv FROM Vol;</code></pre>
                </div>

                <div class="example-box">
                    <h4>j. Pr√©nom et nom concat√©n√©s</h4>
                    <pre><code>SELECT INITCAP(prenomP) || ' ' || UPPER(nomP) AS "Nom Complet"
FROM Pilote;</code></pre>
                    <p><small>INITCAP : 1√®re lettre en majuscule | UPPER : tout en majuscule | || : concat√©nation</small></p>
                </div>

                <div class="example-box">
                    <h4>k. Pilote ayant effectu√© le plus de vols</h4>
                    <pre><code>SELECT p.nomP, p.prenomP, COUNT(v.numVol) AS nbVols
FROM Pilote p
INNER JOIN Vol v ON p.numP = v.numP
GROUP BY p.numP, p.nomP, p.prenomP
HAVING COUNT(v.numVol) = (
    SELECT MAX(COUNT(numVol))
    FROM Vol
    GROUP BY numP
);</code></pre>
                </div>

                <div class="card">
                    <h3>üéì Exercice 2 : √âtudiant-Enseignant-Mati√®re-√âvaluation</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>Etudiant(numEtu, nomEtu, prenomEtu, age, genre)
Enseignant(numEns, nomEns, prenomEns, grade)
Matiere(numMat, nomMat, coefficient, #numEns)
Evaluation(#numEtu, #numMat, note)</code></pre>
                </div>

                <h3>Cr√©ation des Tables</h3>

                <div class="example-box">
                    <pre><code>CREATE TABLE Etudiant (
    numEtu NUMBER(6) PRIMARY KEY,
    nomEtu VARCHAR2(20) NOT NULL,
    prenomEtu VARCHAR2(20),
    age NUMBER(2),
    genre CHAR(1) CHECK (genre IN ('M', 'F'))
);

CREATE TABLE Enseignant (
    numEns NUMBER(6) PRIMARY KEY,
    nomEns VARCHAR2(30) NOT NULL,
    prenomEns VARCHAR2(30),
    grade CHAR(3) CHECK (grade IN ('ASS', 'MCF', 'PRO'))
);

CREATE TABLE Matiere (
    numMat NUMBER(4) PRIMARY KEY,
    nomMat VARCHAR2(25) NOT NULL,
    coefficient NUMBER(1) NOT NULL,
    numEns NUMBER(6),
    FOREIGN KEY (numEns) REFERENCES Enseignant(numEns)
);

CREATE TABLE Evaluation (
    numEtu NUMBER(6),
    numMat NUMBER(4),
    note NUMBER(4,2) CHECK (note BETWEEN 0 AND 20),
    PRIMARY KEY (numEtu, numMat),
    FOREIGN KEY (numEtu) REFERENCES Etudiant(numEtu),
    FOREIGN KEY (numMat) REFERENCES Matiere(numMat)
);</code></pre>
                </div>

                <h3>Requ√™tes SQL (Solutions)</h3>

                <div class="example-box">
                    <h4>a. √âtudiants tri√©s par nom puis pr√©nom</h4>
                    <pre><code>SELECT * FROM Etudiant
ORDER BY nomEtu ASC, prenomEtu ASC;</code></pre>
                </div>

                <div class="example-box">
                    <h4>b. Couples de mati√®res avec m√™me coefficient</h4>
                    <pre><code>SELECT m1.nomMat, m2.nomMat, m1.coefficient
FROM Matiere m1, Matiere m2
WHERE m1.coefficient = m2.coefficient 
  AND m1.numMat < m2.numMat;</code></pre>
                </div>

                <div class="example-box">
                    <h4>c. Tous les enseignants et leurs mati√®res (LEFT JOIN)</h4>
                    <pre><code>SELECT e.nomEns, e.prenomEns, m.nomMat
FROM Enseignant e
LEFT OUTER JOIN Matiere m ON e.numEns = m.numEns;</code></pre>
                </div>

                <div class="example-box">
                    <h4>d. Mati√®res enseign√©es par enseignant</h4>
                    <pre><code>SELECT e.nomEns, e.prenomEns, m.nomMat
FROM Enseignant e
INNER JOIN Matiere m ON e.numEns = m.numEns
ORDER BY e.nomEns;</code></pre>
                </div>

                <div class="example-box">
                    <h4>e. Nombre d'enseignants par grade</h4>
                    <pre><code>SELECT grade, COUNT(*) AS nombreEnseignants
FROM Enseignant
GROUP BY grade;</code></pre>
                </div>

                <div class="example-box">
                    <h4>f. Moyenne par √©tudiant (arrondie √† 2 d√©cimales)</h4>
                    <pre><code>SELECT et.nomEtu, et.prenomEtu, 
       ROUND(AVG(ev.note), 2) AS "Moyenne"
FROM Etudiant et
INNER JOIN Evaluation ev ON et.numEtu = ev.numEtu
GROUP BY et.numEtu, et.nomEtu, et.prenomEtu;</code></pre>
                </div>

                <div class="example-box">
                    <h4>g. Proportion d'√©tudiants avec moyenne > 10</h4>
                    <pre><code>SELECT 
    COUNT(*) * 100.0 / (SELECT COUNT(*) FROM Etudiant) AS "Pourcentage (%)"
FROM (
    SELECT numEtu, AVG(note) AS moyenne
    FROM Evaluation
    GROUP BY numEtu
    HAVING AVG(note) > 10
);</code></pre>
                </div>

                <div class="card">
                    <h3>üíä Exercice 3 : M√©dicaments-Pharmacies</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>Medicament(refMed, nom, composition, datFab, datExp, #refMedPrinceps)
Pharmacie(idPharm, nom, adresse, zone)
DistributionMed(#refMed, #idPharm, disponibilite, prixVente)</code></pre>
                </div>

                <h3>Cr√©ation des Tables</h3>

                <div class="example-box">
                    <pre><code>CREATE TABLE Medicament (
    refMed NUMBER(10) PRIMARY KEY,
    nom VARCHAR2(100) NOT NULL,
    composition VARCHAR2(100),
    datFab DATE,
    datExp DATE,
    refMedPrinceps NUMBER(10),
    FOREIGN KEY (refMedPrinceps) REFERENCES Medicament(refMed)
);

CREATE TABLE Pharmacie (
    idPharm NUMBER(10) PRIMARY KEY,
    nom VARCHAR2(100) NOT NULL,
    adresse VARCHAR2(100),
    zone VARCHAR2(100)
);

CREATE TABLE DistributionMed (
    refMed NUMBER(10),
    idPharm NUMBER(10),
    disponibilite CHAR(2) DEFAULT 'DI' CHECK (disponibilite IN ('DI', 'ND')),
    prixVente NUMBER(6,3),
    PRIMARY KEY (refMed, idPharm),
    FOREIGN KEY (refMed) REFERENCES Medicament(refMed),
    FOREIGN KEY (idPharm) REFERENCES Pharmacie(idPharm)
);</code></pre>
                </div>

                <h3>Requ√™tes SQL (Solutions)</h3>

                <div class="example-box">
                    <h4>3. Supprimer m√©dicaments avec amoxicilline fabriqu√©s avant jan 2020</h4>
                    <pre><code>DELETE FROM DistributionMed
WHERE refMed IN (
    SELECT refMed FROM Medicament
    WHERE composition LIKE '%amoxicilline%'
      AND datFab < TO_DATE('01/01/2020', 'DD/MM/YYYY')
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>a. M√©dicaments non disponibles de la zone Sud</h4>
                    <pre><code>SELECT DISTINCT m.*
FROM Medicament m
INNER JOIN DistributionMed dm ON m.refMed = dm.refMed
INNER JOIN Pharmacie p ON dm.idPharm = p.idPharm
WHERE p.zone = 'Sud' AND dm.disponibilite = 'ND';</code></pre>
                </div>

                <div class="example-box">
                    <h4>b. M√©dicaments dont la date d'expiration est d√©pass√©e</h4>
                    <pre><code>SELECT * FROM Medicament
WHERE datExp < SYSDATE;</code></pre>
                </div>

                <div class="example-box">
                    <h4>c. M√©dicaments non encore mis √† la distribution (NOT EXISTS)</h4>
                    <pre><code>SELECT * FROM Medicament m
WHERE NOT EXISTS (
    SELECT 1 FROM DistributionMed dm 
    WHERE dm.refMed = m.refMed
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>d. Pharmacies deux par deux de la m√™me zone</h4>
                    <pre><code>SELECT p1.nom AS Pharmacie1, p2.nom AS Pharmacie2, p1.zone
FROM Pharmacie p1, Pharmacie p2
WHERE p1.zone = p2.zone AND p1.idPharm < p2.idPharm;</code></pre>
                </div>

                <div class="example-box">
                    <h4>e. Cr√©er vue RepartitionPharm</h4>
                    <pre><code>CREATE VIEW RepartitionPharm AS
SELECT zone, COUNT(*) AS nombrePharmacies
FROM Pharmacie
GROUP BY zone;</code></pre>
                </div>

                <div class="example-box">
                    <h4>f. Pharmacies distribuant TOUS les m√©dicaments (Division)</h4>
                    <pre><code>SELECT p.nom
FROM Pharmacie p
WHERE NOT EXISTS (
    SELECT m.refMed FROM Medicament m
    WHERE NOT EXISTS (
        SELECT 1 FROM DistributionMed dm
        WHERE dm.refMed = m.refMed 
          AND dm.idPharm = p.idPharm
    )
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>g. M√©dicaments distribu√©s dans plus de 3 zones</h4>
                    <pre><code>SELECT m.nom, COUNT(DISTINCT p.zone) AS nbZones
FROM Medicament m
INNER JOIN DistributionMed dm ON m.refMed = dm.refMed
INNER JOIN Pharmacie p ON dm.idPharm = p.idPharm
GROUP BY m.refMed, m.nom
HAVING COUNT(DISTINCT p.zone) > 3;</code></pre>
                </div>

                <div class="example-box">
                    <h4>h. Chaque m√©dicament et son princeps √©ventuel</h4>
                    <pre><code>SELECT m1.nom AS Medicament, m2.nom AS Princeps
FROM Medicament m1
LEFT OUTER JOIN Medicament m2 ON m1.refMedPrinceps = m2.refMed;</code></pre>
                </div>
            </section>

            <!-- Section 7 : Exercice Pratique Biblioth√®que -->
            <section id="exercice">
                <h2>7. Exercice Pratique : Syst√®me de Biblioth√®que</h2>

                <div class="card">
                    <h3>üìñ √ânonc√©</h3>
                    <p>Une biblioth√®que de pr√™t dispose d'un certain nombre d'ouvrages, class√©s par rayon (Litt√©rature, Histoire, G√©ographie, etc.). Chaque ouvrage est l'≈ìuvre d'un ou plusieurs auteurs, et doit √©galement √™tre r√©f√©renc√© selon un certain nombre de mots-cl√©s.</p>
                    
                    <p>Chaque adh√©rent peut emprunter jusqu'√† 5 livres en m√™me temps, et dispose d'un certain d√©lai pass√© lequel il doit recevoir des relances puis des p√©nalit√©s.</p>

                    <p>En plus de cela, il existe une biblioth√®que centrale et des antennes locales. Chaque antenne poss√®de un fonds qui lui est propre, et peut de surcro√Æt se procurer certains ouvrages aupr√®s de la biblioth√®que centrale (mais pas d'une autre biblioth√®que locale). Tout adh√©rent peut automatiquement emprunter des ouvrages dans toutes les antennes locales.</p>
                </div>

                <h3>Trois Cas de Complexit√© Croissante</h3>

                <div class="card">
                    <h4>Cas 1 : Biblioth√®que Simple (Un exemplaire par ouvrage, sans historique)</h4>
                    <p>La biblioth√®que ne poss√®de qu'un seul exemplaire de chaque ouvrage. Elle enregistre uniquement les emprunts pr√©sents (il n'y a pas d'historique des emprunts pass√©s).</p>
                    
                    <div class="schema-diagram">
                        <h4>Sch√©ma Entit√©-Association - Cas 1</h4>
                        <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                            <img src="image/Case1Biblio.jpeg" style="max-width: 100%; height: auto;" id="schema-cas1">
                        </div>
                    </div>

                    <div class="tip">
                        <strong>Points cl√©s du Cas 1 :</strong>
                        <ul>
                            <li>Relation directe entre Ouvrage et Emprunt (0,1)</li>
                            <li>Un ouvrage peut √™tre emprunt√© ou disponible</li>
                            <li>Pas de table d'historique n√©cessaire</li>
                            <li>L'attribut date_Emprunt et delai sont dans l'association Emprunt</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h4>Cas 2 : Avec Historique (Un exemplaire, historique complet)</h4>
                    <p>La biblioth√®que ne poss√®de qu'un seul exemplaire de chaque ouvrage, mais elle tient un historique de tous les emprunts qui ont √©t√© effectu√©s.</p>
                    
                    <div class="schema-diagram">
                        <h4>Sch√©ma Entit√©-Association - Cas 2</h4>
                        <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                            <img src="image/Cas2Biblio.jpg" style="max-width: 100%; height: auto;" id="schema-cas2">
                        </div>
                    </div>

                    <div class="tip">
                        <strong>Points cl√©s du Cas 2 :</strong>
                        <ul>
                            <li>L'association Emprunt devient une entit√© avec identifiant (idEmprunt)</li>
                            <li>Cardinalit√© Ouvrage-Emprunt passe √† (0,n) pour g√©rer l'historique</li>
                            <li>Nouvelle association DetailsEmprunt pour lier Ouvrage et Emprunt</li>
                            <li>Permet de conserver tous les emprunts pass√©s</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h4>Cas 3 : Complet (Plusieurs exemplaires + Historique)</h4>
                    <p>La biblioth√®que tient un historique ET elle est maintenant susceptible de poss√©der plusieurs exemplaires de certains ouvrages.</p>
                    
                    <div class="schema-diagram">
                        <h4>Sch√©ma Entit√©-Association - Cas 3</h4>
                        <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                            <img src="image/Cas3Biblio.jpg" style="max-width: 100%; height: auto;" id="schema-cas3">
                        </div>
                       <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                            <img src="image/Cas3BisBiblio.jpg" style="max-width: 100%; height: auto;" id="schema-cas3">
                        </div>
                    </div>

                    <div class="tip">
                        <strong>Points cl√©s du Cas 3 :</strong>
                        <ul>
                            <li>Les attributs date_Emprunt et delai migrent vers l'entit√© Ouvrage</li>
                            <li>L'association Emprunt relie directement Ouvrage et Adherent</li>
                            <li>Cardinalit√© (0,1) entre Ouvrage et Emprunt (un ouvrage emprunt√© ou non)</li>
                            <li>Structure plus simple mais permettant la gestion de multiples exemplaires</li>
                        </ul>
                    </div>
                </div>

                <div class="warning">
                    <strong>Extension : Biblioth√®que Centrale et Antennes Locales</strong><br>
                    Le sch√©ma complet (Image 1) int√®gre aussi :
                    <ul>
                        <li>BiblioAntenneLoc ale (antennes locales)</li>
                        <li>BibliothequeCentrale (biblioth√®que centrale)</li>
                        <li>Association "Demande_par" (0,n) entre BiblioAntenneLocale et BibliothequeCentrale</li>
                        <li>Association "Approvionnement" avec date_Approv pour tracer les approvisionnements</li>
                        <li>Association "AppartientA" (0,n) liant les antennes aux ouvrages disponibles localement</li>
                    </ul>
                </div>

                <h3>Mod√®le Relationnel pour le Cas 3</h3>

                <div class="example-box">
                    <h4>Tables Principales</h4>
                    <pre><code>-- Table des ouvrages
CREATE TABLE Ouvrage (
    idOuvrage INT PRIMARY KEY,
    titre VARCHAR(200),
    idRayon INT,
    date_Emprunt DATE,
    delai INT,
    FOREIGN KEY (idRayon) REFERENCES Rayon(idRayon)
);

-- Table des auteurs
CREATE TABLE Auteur (
    idAuteur INT PRIMARY KEY,
    nom VARCHAR(100),
    prenom VARCHAR(100)
);

-- Table des adh√©rents
CREATE TABLE Adherent (
    idAdherent INT PRIMARY KEY,
    nom VARCHAR(100),
    prenom VARCHAR(100),
    adresse VARCHAR(200),
    dateInscription DATE
);

-- Table des rayons
CREATE TABLE Rayon (
    idRayon INT PRIMARY KEY,
    Type VARCHAR(50)
);

-- Table des mots-cl√©s
CREATE TABLE MotCle (
    idMC INT PRIMARY KEY,
    intitule VARCHAR(100)
);

-- Association Oeuvre De (n:n)
CREATE TABLE OeuvreDe (
    idOuvrage INT,
    idAuteur INT,
    PRIMARY KEY (idOuvrage, idAuteur),
    FOREIGN KEY (idOuvrage) REFERENCES Ouvrage(idOuvrage),
    FOREIGN KEY (idAuteur) REFERENCES Auteur(idAuteur)
);

-- Association Referencement (n:n)
CREATE TABLE Referencement (
    idOuvrage INT,
    idMC INT,
    PRIMARY KEY (idOuvrage, idMC),
    FOREIGN KEY (idOuvrage) REFERENCES Ouvrage(idOuvrage),
    FOREIGN KEY (idMC) REFERENCES MotCle(idMC)
);

-- Association Emprunt (relation actuelle)
CREATE TABLE Emprunt (
    idOuvrage INT PRIMARY KEY,
    idAdherent INT,
    FOREIGN KEY (idOuvrage) REFERENCES Ouvrage(idOuvrage),
    FOREIGN KEY (idAdherent) REFERENCES Adherent(idAdherent)
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>Requ√™tes SQL Utiles</h4>
                    <pre><code>-- 1. Lister tous les ouvrages disponibles (non emprunt√©s)
SELECT o.titre, r.Type 
FROM Ouvrage o
INNER JOIN Rayon r ON o.idRayon = r.idRayon
WHERE o.idOuvrage NOT IN (SELECT idOuvrage FROM Emprunt);

-- 2. Nombre d'emprunts en cours par adh√©rent
SELECT a.nom, a.prenom, COUNT(e.idOuvrage) AS nbEmprunts
FROM Adherent a
LEFT JOIN Emprunt e ON a.idAdherent = e.idAdherent
GROUP BY a.idAdherent, a.nom, a.prenom;

-- 3. Adh√©rents ayant atteint la limite de 5 emprunts
SELECT a.nom, a.prenom, COUNT(e.idOuvrage) AS nbEmprunts
FROM Adherent a
INNER JOIN Emprunt e ON a.idAdherent = e.idAdherent
GROUP BY a.idAdherent, a.nom, a.prenom
HAVING COUNT(e.idOuvrage) >= 5;

-- 4. Ouvrages en retard (d√©lai d√©pass√©)
SELECT o.titre, a.nom, o.date_Emprunt, o.delai,
       DATEDIFF(CURRENT_DATE, o.date_Emprunt) AS joursEcoules
FROM Ouvrage o
INNER JOIN Emprunt e ON o.idOuvrage = e.idOuvrage
INNER JOIN Adherent a ON e.idAdherent = a.idAdherent
WHERE DATEDIFF(CURRENT_DATE, o.date_Emprunt) > o.delai;

-- 5. Ouvrages par auteur
SELECT a.nom, a.prenom, COUNT(od.idOuvrage) AS nbOuvrages
FROM Auteur a
LEFT JOIN OeuvreDe od ON a.idAuteur = od.idAuteur
GROUP BY a.idAuteur, a.nom, a.prenom
ORDER BY nbOuvrages DESC;</code></pre>
                </div>
            </section>

            <!-- Section 8 : Exercice ASSURAUTO -->
            <section id="exercice-assurance">
                <h2>8. Exercice : Gestion de Sinistres ASSURAUTO</h2>

                <div class="card">
                    <h3>üöó √ânonc√©</h3>
                    <p>On souhaite construire un MEA destin√© √† la gestion de sinistres pour la compagnie d'assurance automobile ASSURAUTO √† partir de la lettre de demande d'expertise envoy√©e par un de ses agents d'assurance. On souhaite garder aussi l'historique des √©changes entre l'agent et l'expert.</p>
                    
                    <div class="example-box">
                        <h4>üìß Lettre de Demande d'Expertise</h4>
                        <div style="background: white; padding: 20px; border-left: 4px solid #667eea;">
                            <p style="text-align: right;"><em>√Ä Paris, le 10 juin 2005</em></p>
                            <p><strong>De la part de M. Pierre Durand, Agent d'assurance ASSURAUTO</strong><br>
                            10, rue Saint-Antoine, 75001 Paris<br>
                            t√©l : 01 42 42 24 24</p>
                            
                            <p><strong>√Ä M. Henri Dupond, Expert en assurance</strong></p>
                            
                            <p>Monsieur,</p>
                            
                            <p>Je vous saisis par le pr√©sent courrier pour vous demander de suivre le dossier du sinistre <strong>SIS20020934</strong> constitu√© √† ce jour suite √† l'accident survenu le <strong>02 juin 2005</strong> au croisement de la rue de Rivoli et de la rue du Renard √† <strong>Paris 1er arrondissement</strong>, √† <strong>11 heures du soir</strong>, par temps de pluie, d'o√π l'√©tat glissant de la chauss√©e √† ce moment-l√†.</p>
                            
                            <p>M. <strong>Andr√© Oliveau</strong> est un des protagonistes de l'accident. Il a souscrit chez nous, depuis le <strong>17 d√©cembre 2002</strong>, un contrat enregistr√© sous le n¬∞ <strong>CTR2002120</strong> et de type <strong>tout risque</strong> sur le v√©hicule impliqu√© dans le sinistre et immatricul√© <strong>123 ABC 75</strong>. Ce v√©hicule est une <strong>Renault Espace de 100 chevaux</strong>.</p>
                            
                            <p>M. Oliveau habite √† Paris, <strong>25 rue de Rivoli, dans le 1er arrondissement</strong>. Il est joignable au <strong>01 42 23 12 20</strong> chez lui, ou au <strong>06 12 12 12 12</strong> sur son portable, ou au <strong>01 23 43 23 34</strong> √† son travail.</p>
                            
                            <p>Voudriez-vous prendre contact avec lui pour convenir d'un rendez-vous en vue de l'expertise que vous voudrez bien effectuer au garage <strong>¬´ Saroul ¬ª, 45, rue Rousseau, 75002 Paris</strong>, dans un d√©lai de <strong>15 jours</strong>.</p>
                            
                            <p>Dans l'attente de votre rapport d'expertise, nous vous prions de croire, Monsieur l'expert, √† nos sentiments distingu√©s.</p>
                            
                            <p><em>M. Durand, Agent d'assurance</em></p>
                        </div>
                    </div>
                </div>

                <h3>Analyse de la Lettre - Entit√©s et Associations</h3>

                <div class="card">
                    <h4>üîç Entit√©s Identifi√©es</h4>
                    <table>
                        <tr>
                            <th>Entit√©</th>
                            <th>Attributs</th>
                            <th>Cl√© Primaire</th>
                        </tr>
                        <tr>
                            <td><strong>Agent_Assurance</strong></td>
                            <td>idAgent, nomAgent, prenomAgent, Adresse</td>
                            <td><u>idAgent</u></td>
                        </tr>
                        <tr>
                            <td><strong>Expert_Assurance</strong></td>
                            <td>idExpert, nomAgent, prenomAgent, Adresse</td>
                            <td><u>idExpert</u></td>
                        </tr>
                        <tr>
                            <td><strong>Client_Assure</strong></td>
                            <td>idClient, nom, prenom, adresse</td>
                            <td><u>idClient</u></td>
                        </tr>
                        <tr>
                            <td><strong>CoordonneesTelephonique</strong></td>
                            <td>numTelephone, type</td>
                            <td><u>numTelephone</u></td>
                        </tr>
                        <tr>
                            <td><strong>ContratAssurance</strong></td>
                            <td>idContrat, date_Contrat, type</td>
                            <td><u>idContrat</u></td>
                        </tr>
                        <tr>
                            <td><strong>Vehicule</strong></td>
                            <td>immatriculation, marque, modele, puissance</td>
                            <td><u>immatriculation</u></td>
                        </tr>
                        <tr>
                            <td><strong>Sinistre</strong></td>
                            <td>idSinistre, date_Sinistre, lieu, heure, description</td>
                            <td><u>idSinistre</u></td>
                        </tr>
                        <tr>
                            <td><strong>Garage</strong></td>
                            <td>idGarage, nomGarage, adresseGarage</td>
                            <td><u>idGarage</u></td>
                        </tr>
                        <tr>
                            <td><strong>RapportExpertise</strong></td>
                            <td>idExpertise, date_Expertise, description</td>
                            <td><u>idExpertise</u></td>
                        </tr>
                    </table>
                </div>

                <div class="card">
                    <h4>üîó Associations Identifi√©es</h4>
                    <ul>
                        <li><strong>Relatif_a</strong> : Client_Assure (0,n) ‚Üî CoordonneesTelephonique (1,1)</li>
                        <li><strong>ConcerneC</strong> : ContratAssurance (1,1) ‚Üî Client_Assure (1,n)</li>
                        <li><strong>ConcerneV</strong> : ContratAssurance (1,1) ‚Üî Vehicule (1,n)</li>
                        <li><strong>Couvre</strong> : ContratAssurance (0,n) ‚Üî Sinistre (1,1)</li>
                        <li><strong>ConcerneSinistre</strong> : Sinistre (1,1) ‚Üî Garage (0,1)</li>
                        <li><strong>Fait_a</strong> : Garage (1,n) ‚Üî RapportExpertise (1,1)</li>
                        <li><strong>Redige_par</strong> : RapportExpertise (1,1) ‚Üî Expert_Assurance (0,n)</li>
                        <li><strong>DemandeExpertise</strong> : Agent_Assurance (0,n) ‚Üî Expert_Assurance (0,n) avec attributs Date_Demande, delai</li>
                    </ul>
                </div>

                <div class="schema-diagram">
                    <h4>Sch√©ma Entit√©-Association - ASSURAUTO</h4>
                    <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                        <img src="" alt="Ins√©rez ici l'image du sch√©ma ASSURAUTO" style="max-width: 100%; height: auto;" id="schema-assurauto">
                        <p style="color: #999; font-style: italic;">üì∑ Zone r√©serv√©e pour l'image du sch√©ma ASSURAUTO</p>
                    </div>
                </div>

                <h3>Mod√®le Relationnel ASSURAUTO</h3>

                <div class="example-box">
                    <h4>Tables D√©riv√©es du MEA</h4>
                    <pre><code>-- Entit√©s
Agent_Assurance(<u>idAgent</u>, nomAgent, prenomAgent, Adresse)

Expert_Assurance(<u>idExpert</u>, nomAgent, prenomAgent, Adresse)

Client_Assure(<u>idClient</u>, nom, prenom, adresse)

CoordonneesTelephonique(<u>numTelephone</u>, type, #idClient)

ContratAssurance(<u>idContrat</u>, date_Contrat, type, #idClient, #immatriculation)

Vehicule(<u>immatriculation</u>, marque, modele, puissance)

Sinistre(<u>idSinistre</u>, date_Sinistre, lieu, heure, description, #idContrat, #idGarage)

Garage(<u>idGarage</u>, nomGarage, adresseGarage)

RapportExpertise(<u>idExpertise</u>, date_Expertise, description, #idGarage, #idExpert)

-- Association n:n
DemandeExpertise(<u>#idAgent, #idExpert</u>, Date_Demande, delai)</code></pre>
                </div>

                <h3>Cr√©ation des Tables SQL</h3>

                <div class="example-box">
                    <pre><code>CREATE TABLE Agent_Assurance (
    idAgent NUMBER(10) PRIMARY KEY,
    nomAgent VARCHAR2(50) NOT NULL,
    prenomAgent VARCHAR2(50),
    Adresse VARCHAR2(100)
);

CREATE TABLE Expert_Assurance (
    idExpert NUMBER(10) PRIMARY KEY,
    nomAgent VARCHAR2(50) NOT NULL,
    prenomAgent VARCHAR2(50),
    Adresse VARCHAR2(100)
);

CREATE TABLE Client_Assure (
    idClient NUMBER(10) PRIMARY KEY,
    nom VARCHAR2(50) NOT NULL,
    prenom VARCHAR2(50),
    adresse VARCHAR2(100)
);

CREATE TABLE CoordonneesTelephonique (
    numTelephone VARCHAR2(20) PRIMARY KEY,
    type VARCHAR2(20) CHECK (type IN ('domicile', 'portable', 'travail')),
    idClient NUMBER(10) NOT NULL,
    FOREIGN KEY (idClient) REFERENCES Client_Assure(idClient)
);

CREATE TABLE Vehicule (
    immatriculation VARCHAR2(20) PRIMARY KEY,
    marque VARCHAR2(50),
    modele VARCHAR2(50),
    puissance NUMBER(5)
);

CREATE TABLE ContratAssurance (
    idContrat VARCHAR2(20) PRIMARY KEY,
    date_Contrat DATE NOT NULL,
    type VARCHAR2(30) CHECK (type IN ('tout risque', 'tiers', 'tiers complet')),
    idClient NUMBER(10) NOT NULL,
    immatriculation VARCHAR2(20) NOT NULL,
    FOREIGN KEY (idClient) REFERENCES Client_Assure(idClient),
    FOREIGN KEY (immatriculation) REFERENCES Vehicule(immatriculation)
);

CREATE TABLE Garage (
    idGarage NUMBER(10) PRIMARY KEY,
    nomGarage VARCHAR2(50) NOT NULL,
    adresseGarage VARCHAR2(100)
);

CREATE TABLE Sinistre (
    idSinistre VARCHAR2(20) PRIMARY KEY,
    date_Sinistre DATE NOT NULL,
    lieu VARCHAR2(100),
    heure VARCHAR2(10),
    description VARCHAR2(500),
    idContrat VARCHAR2(20) NOT NULL,
    idGarage NUMBER(10),
    FOREIGN KEY (idContrat) REFERENCES ContratAssurance(idContrat),
    FOREIGN KEY (idGarage) REFERENCES Garage(idGarage)
);

CREATE TABLE RapportExpertise (
    idExpertise NUMBER(10) PRIMARY KEY,
    date_Expertise DATE,
    description VARCHAR2(500),
    idGarage NUMBER(10) NOT NULL,
    idExpert NUMBER(10) NOT NULL,
    FOREIGN KEY (idGarage) REFERENCES Garage(idGarage),
    FOREIGN KEY (idExpert) REFERENCES Expert_Assurance(idExpert)
);

CREATE TABLE DemandeExpertise (
    idAgent NUMBER(10),
    idExpert NUMBER(10),
    Date_Demande DATE NOT NULL,
    delai NUMBER(3),
    PRIMARY KEY (idAgent, idExpert, Date_Demande),
    FOREIGN KEY (idAgent) REFERENCES Agent_Assurance(idAgent),
    FOREIGN KEY (idExpert) REFERENCES Expert_Assurance(idExpert)
);</code></pre>
                </div>

                <h3>Requ√™tes SQL Utiles pour ASSURAUTO</h3>

                <div class="example-box">
                    <h4>1. Lister tous les sinistres d'un client donn√©</h4>
                    <pre><code>SELECT s.idSinistre, s.date_Sinistre, s.lieu, v.marque, v.modele
FROM Sinistre s
INNER JOIN ContratAssurance c ON s.idContrat = c.idContrat
INNER JOIN Client_Assure cl ON c.idClient = cl.idClient
INNER JOIN Vehicule v ON c.immatriculation = v.immatriculation
WHERE cl.nom = 'Oliveau' AND cl.prenom = 'Andr√©';</code></pre>
                </div>

                <div class="example-box">
                    <h4>2. Sinistres sans rapport d'expertise</h4>
                    <pre><code>SELECT s.*
FROM Sinistre s
WHERE s.idGarage IS NULL OR NOT EXISTS (
    SELECT 1 FROM RapportExpertise r
    WHERE r.idGarage = s.idGarage
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>3. Expert ayant r√©alis√© le plus d'expertises</h4>
                    <pre><code>SELECT e.nomAgent, e.prenomAgent, COUNT(r.idExpertise) AS nbExpertises
FROM Expert_Assurance e
INNER JOIN RapportExpertise r ON e.idExpert = r.idExpert
GROUP BY e.idExpert, e.nomAgent, e.prenomAgent
HAVING COUNT(r.idExpertise) = (
    SELECT MAX(COUNT(idExpertise))
    FROM RapportExpertise
    GROUP BY idExpert
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>4. Clients avec plusieurs v√©hicules assur√©s</h4>
                    <pre><code>SELECT cl.nom, cl.prenom, COUNT(DISTINCT c.immatriculation) AS nbVehicules
FROM Client_Assure cl
INNER JOIN ContratAssurance c ON cl.idClient = c.idClient
GROUP BY cl.idClient, cl.nom, cl.prenom
HAVING COUNT(DISTINCT c.immatriculation) > 1;</code></pre>
                </div>

                <div class="example-box">
                    <h4>5. Tous les num√©ros de t√©l√©phone d'un client</h4>
                    <pre><code>SELECT cl.nom, cl.prenom, ct.numTelephone, ct.type
FROM Client_Assure cl
INNER JOIN CoordonneesTelephonique ct ON cl.idClient = ct.idClient
WHERE cl.nom = 'Oliveau'
ORDER BY ct.type;</code></pre>
                </div>

                <div class="example-box">
                    <h4>6. Historique des demandes d'expertise entre agents et experts</h4>
                    <pre><code>SELECT a.nomAgent AS Agent, e.nomAgent AS Expert, 
       d.Date_Demande, d.delai
FROM DemandeExpertise d
INNER JOIN Agent_Assurance a ON d.idAgent = a.idAgent
INNER JOIN Expert_Assurance e ON d.idExpert = e.idExpert
ORDER BY d.Date_Demande DESC;</code></pre>
                </div>

                <div class="tip">
                    <strong>Points Cl√©s du Mod√®le ASSURAUTO :</strong>
                    <ul>
                        <li>Gestion des coordonn√©es t√©l√©phoniques multiples (domicile, portable, travail)</li>
                        <li>Un client peut avoir plusieurs contrats et plusieurs v√©hicules</li>
                        <li>Un sinistre est li√© √† un contrat et peut n√©cessiter une expertise dans un garage</li>
                        <li>L'historique des demandes d'expertise est conserv√© gr√¢ce √† l'association n:n entre Agent et Expert</li>
                        <li>Auto-r√©f√©rence possible dans M√©dicament pour le princeps (m√™me principe applicable si on veut lier v√©hicules de remplacement)</li>
                    </ul>
                </div>
            </section>

            <!-- Footer -->
            <section style="text-align: center; padding: 30px; background: #f8f9fa; border-radius: 10px; margin-top: 50px;">
                <h3 style="color: #667eea;">üéì Fin du Guide</h3>
                <p>Ce guide couvre les concepts essentiels des bases de donn√©es relationnelles, de la conception √† l'impl√©mentation SQL.</p>
                <p style="color: #999; margin-top: 20px;">Bonne r√©vision ! üìö</p>
            </section>
        </div>
    </div>

    <script>
        // Script pour permettre l'ajout d'images plus tard
        document.addEventListener('DOMContentLoaded', function() {
            // Fonction pour charger une image
            window.chargerImage = function(idElement, urlImage) {
                const img = document.getElementById(idElement);
                if (img && urlImage) {
                    img.src = urlImage;
                    img.style.display = 'block';
                    img.nextElementSibling.style.display = 'none';
                }
            };
            
            // Exemple d'utilisation (d√©commenter et modifier selon vos besoins):
            // chargerImage('schema-cas1', 'URL_DE_VOTRE_IMAGE_CAS1');
            // chargerImage('schema-cas2', 'URL_DE_VOTRE_IMAGE_CAS2');
            // chargerImage('schema-cas3', 'URL_DE_VOTRE_IMAGE_CAS3');
        });
    </script>
</body>
</html>

</head>
<body>
    <div class="container">
         <a href="index.html" style="text-decoration: none;">
            <button class="back-button">‚Üê Retour √† l'accueil</button>
        </a>
        <header>
            <h1>üìö Guide Complet des Bases de Donn√©es Relationnelles</h1>
            <p>De la Conception √† l'Impl√©mentation SQL</p>
        </header>

        <div class="content">
            <!-- Section 1 : Mod√®le Entit√©-Association -->
            <section id="mea">
                <h2>1. Conception : Le Mod√®le Entit√©-Association (MEA)</h2>
                
                <p>Le sch√©ma conceptuel est le r√©sultat de la mod√©lisation du syst√®me d'information, r√©alis√©e <strong>ind√©pendamment de l'impl√©mentation machine</strong>.</p>

                <h3>Concepts Fondamentaux</h3>

                <div class="card">
                    <h4>üî∑ Entit√©</h4>
                    <p>Repr√©sentation d'un objet du monde r√©el (concret ou abstrait) ayant une existence propre et pouvant √™tre identifi√© distinctement.</p>
                    <p><strong>Repr√©sentation graphique :</strong> Un <span class="highlight">rectangle</span></p>
                </div>

                <div class="card">
                    <h4>üîπ Attribut (Propri√©t√©)</h4>
                    <p>Caract√©ristique atomique d'une entit√© ou d'une association. L'<strong>identifiant (cl√©)</strong> est <u>soulign√©</u>.</p>
                </div>

                <div class="card">
                    <h4>üî∂ Association</h4>
                    <p>Lien ayant un sens d√©termin√© entre plusieurs entit√©s (souvent un verbe).</p>
                    <p><strong>Repr√©sentation graphique :</strong> Un <span class="highlight">losange ou ellipse</span></p>
                </div>

                <div class="card">
                    <h4>üìä Cardinalit√©s</h4>
                    <p>Couple (min, max) caract√©risant le lien :</p>
                    <ul>
                        <li><strong>Min (0 ou 1) :</strong> Nombre minimum de participations d'une entit√©</li>
                        <li><strong>Max (1 ou n) :</strong> Nombre maximum de participations</li>
                    </ul>
                </div>

                <div class="example-box">
                    <h4>üìã Exemple : Syst√®me d'Assurance Auto</h4>
                    <div class="schema-diagram">
                        <div class="entity">CLIENT<br><u>idClient</u>, nom, pr√©nom, adresse</div>
                        <span style="font-size: 1.5em; margin: 0 10px;">1,n</span>
                        <div class="association">poss√®de</div>
                        <span style="font-size: 1.5em; margin: 0 10px;">0,n</span>
                        <div class="entity">CONTRAT<br><u>numContrat</u>, dateDebut, prime</div>
                    </div>
                    <div class="schema-diagram">
                        <div class="entity">V√âHICULE<br><u>immatriculation</u>, marque, mod√®le</div>
                        <span style="font-size: 1.5em; margin: 0 10px;">1,n</span>
                        <div class="association">impliqu√©</div>
                        <span style="font-size: 1.5em; margin: 0 10px;">0,n</span>
                        <div class="entity">SINISTRE<br><u>numSinistre</u>, date, montant</div>
                    </div>
                    <p><strong>Interpr√©tation :</strong></p>
                    <ul>
                        <li>Un client peut poss√©der 1 ou plusieurs contrats (1,n)</li>
                        <li>Un contrat est associ√© √† 0 ou plusieurs v√©hicules (0,n)</li>
                        <li>Un v√©hicule peut √™tre impliqu√© dans 0 ou plusieurs sinistres</li>
                    </ul>
                </div>
            </section>

            <!-- Section 2 : Mod√®le Relationnel -->
            <section id="relationnel">
                <h2>2. Passage au Mod√®le Relationnel & Normalisation</h2>

                <h3>R√®gles de Transformation</h3>

                <div class="card">
                    <h4>R√®gle 1 : Entit√©s ‚Üí Tables</h4>
                    <p>Toute entit√© devient une <strong>relation (table)</strong>. L'identifiant devient la <strong>cl√© primaire</strong>.</p>
                    <div class="example-box">
                        <p><strong>Entit√© MEA :</strong> CLIENT(<u>idClient</u>, nom, pr√©nom)</p>
                        <p><strong>Table SQL :</strong></p>
                        <pre><code>CREATE TABLE Client (
    idClient INT PRIMARY KEY,
    nom VARCHAR(50),
    prenom VARCHAR(50)
);</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>R√®gle 2 : Associations (n:n) ‚Üí Table</h4>
                    <p>Si les deux c√¥t√©s ont une cardinalit√© max "n", l'association devient une nouvelle table. Sa cl√© primaire est la <strong>concat√©nation</strong> des cl√©s des entit√©s li√©es.</p>
                    <div class="example-box">
                        <p><strong>Exemple :</strong> √âTUDIANT (n:n) INSCRIPTION (n:n) COURS</p>
                        <pre><code>CREATE TABLE Inscription (
    idEtudiant INT,
    idCours INT,
    dateInscription DATE,
    PRIMARY KEY (idEtudiant, idCours),
    FOREIGN KEY (idEtudiant) REFERENCES Etudiant(idEtudiant),
    FOREIGN KEY (idCours) REFERENCES Cours(idCours)
);</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>R√®gle 3 : Associations (1:n / 1:1) ‚Üí Cl√© √âtrang√®re</h4>
                    <p>La cl√© de l'entit√© c√¥t√© "1" (ou "0,1") migre comme <strong>cl√© √©trang√®re</strong> dans la table de l'entit√© oppos√©e.</p>
                    <div class="example-box">
                        <p><strong>Exemple :</strong> D√âPARTEMENT (1) ‚Üê‚Üí (n) EMPLOY√â</p>
                        <pre><code>CREATE TABLE Employe (
    idEmploye INT PRIMARY KEY,
    nom VARCHAR(50),
    idDepartement INT,
    FOREIGN KEY (idDepartement) REFERENCES Departement(idDepartement)
);</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>R√®gle 4 : Associations n-aires ‚Üí Table</h4>
                    <p>Les associations impliquant 3 entit√©s ou plus deviennent syst√©matiquement une relation.</p>
                    <div class="example-box">
                        <p><strong>Exemple :</strong> FOURNISSEUR - PRODUIT - PROJET</p>
                        <pre><code>CREATE TABLE Approvisionnement (
    idFournisseur INT,
    idProduit INT,
    idProjet INT,
    quantite INT,
    PRIMARY KEY (idFournisseur, idProduit, idProjet)
);</code></pre>
                    </div>
                </div>

                <h3>Normalisation (√âviter la Redondance)</h3>

                <div class="tip">
                    La normalisation permet d'√©liminer les anomalies d'insertion, de modification et de suppression.
                </div>

                <div class="card">
                    <h4>1FN (Premi√®re Forme Normale)</h4>
                    <p>‚úì Valeurs atomiques (pas de listes ou de tableaux)</p>
                    <p>‚úì Cl√© primaire identifi√©e</p>
                    <div class="example-box">
                        <p><strong>‚ùå Non conforme 1FN :</strong></p>
                        <table>
                            <tr><th>idClient</th><th>T√©l√©phones</th></tr>
                            <tr><td>1</td><td>06123, 07456</td></tr>
                        </table>
                        <p><strong>‚úì Conforme 1FN :</strong></p>
                        <table>
                            <tr><th>idClient</th><th>T√©l√©phone</th></tr>
                            <tr><td>1</td><td>06123</td></tr>
                            <tr><td>1</td><td>07456</td></tr>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <h4>2FN (Deuxi√®me Forme Normale)</h4>
                    <p>‚úì 1FN respect√©e</p>
                    <p>‚úì Tous les attributs d√©pendent de la <strong>totalit√©</strong> de la cl√© primaire</p>
                    <div class="example-box">
                        <p><strong>‚ùå Non conforme 2FN :</strong></p>
                        <p>COMMANDE(<u>idCommande, idProduit</u>, nomProduit, quantit√©)</p>
                        <p>‚Üí nomProduit d√©pend seulement de idProduit, pas de la cl√© compl√®te</p>
                        <p><strong>‚úì Solution :</strong> S√©parer en deux tables</p>
                    </div>
                </div>

                <div class="card">
                    <h4>3FN (Troisi√®me Forme Normale)</h4>
                    <p>‚úì 2FN respect√©e</p>
                    <p>‚úì Aucun attribut non-cl√© ne d√©pend d'un autre attribut non-cl√© (pas de d√©pendance transitive)</p>
                    <div class="example-box">
                        <p><strong>‚ùå Non conforme 3FN :</strong></p>
                        <p>EMPLOY√â(<u>idEmploy√©</u>, nom, codePostal, ville)</p>
                        <p>‚Üí ville d√©pend de codePostal (d√©pendance transitive)</p>
                        <p><strong>‚úì Solution :</strong> Cr√©er une table VILLE(codePostal, ville)</p>
                    </div>
                </div>
            </section>

            <!-- Section 3 : Alg√®bre Relationnelle -->
            <section id="algebre">
                <h2>3. Alg√®bre Relationnelle</h2>

                <p>L'alg√®bre est un langage <strong>proc√©dural</strong> o√π le r√©sultat de chaque op√©ration est une nouvelle relation.</p>

                <h3>Op√©rations Unaires</h3>

                <div class="card">
                    <h4>üîç S√©lection (œÉ)</h4>
                    <div class="formula">R = œÉ<sub>condition</sub>(Relation)</div>
                    <p>Filtre les tuples (lignes) v√©rifiant un pr√©dicat.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Trouver tous les clients dont l'√¢ge est sup√©rieur √† 30 ans</p>
                        <div class="formula">œÉ<sub>√¢ge > 30</sub>(CLIENT)</div>
                        <table>
                            <tr><th>idClient</th><th>nom</th><th>√¢ge</th></tr>
                            <tr><td>1</td><td>Dupont</td><td>35</td></tr>
                            <tr><td>3</td><td>Martin</td><td>42</td></tr>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <h4>üìã Projection (œÄ)</h4>
                    <div class="formula">R = œÄ<sub>colonne1, colonne2</sub>(Relation)</div>
                    <p>Extrait certaines colonnes et supprime les doublons.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Afficher uniquement les noms des clients</p>
                        <div class="formula">œÄ<sub>nom</sub>(CLIENT)</div>
                        <table>
                            <tr><th>nom</th></tr>
                            <tr><td>Dupont</td></tr>
                            <tr><td>Bernard</td></tr>
                            <tr><td>Martin</td></tr>
                        </table>
                    </div>
                </div>

                <h3>Op√©rations Ensemblistes</h3>

                <div class="warning">
                    Les relations doivent imp√©rativement avoir le <strong>m√™me sch√©ma</strong> (m√™me ordre de colonnes, m√™me degr√©, m√™me type de donn√©es respectif).
                </div>

                <div class="card">
                    <h4>‚à™ Union</h4>
                    <div class="formula">R = R1 ‚à™ R2</div>
                    <p>Contient tous les tuples de R1 et R2 sans doublons. Commutative et associative.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Clients Paris :</strong> {Alice, Bob}</p>
                        <p><strong>Clients Lyon :</strong> {Bob, Charlie}</p>
                        <p><strong>R√©sultat :</strong> {Alice, Bob, Charlie}</p>
                    </div>
                </div>

                <div class="card">
                    <h4>‚à© Intersection</h4>
                    <div class="formula">R = R1 ‚à© R2</div>
                    <p>Tuples pr√©sents √† la fois dans R1 et R2.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Clients Paris :</strong> {Alice, Bob}</p>
                        <p><strong>Clients ayant command√© :</strong> {Bob, Charlie}</p>
                        <p><strong>R√©sultat :</strong> {Bob}</p>
                    </div>
                </div>

                <div class="card">
                    <h4>‚àí Diff√©rence</h4>
                    <div class="formula">R = R1 ‚àí R2</div>
                    <p>Tuples de R1 qui ne sont pas dans R2. <strong>Non commutative</strong>.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Tous les clients :</strong> {Alice, Bob, Charlie}</p>
                        <p><strong>Clients ayant command√© :</strong> {Bob}</p>
                        <p><strong>Clients sans commande :</strong> {Alice, Charlie}</p>
                    </div>
                </div>

                <h3>Produit Cart√©sien & Jointures</h3>

                <div class="card">
                    <h4>√ó Produit Cart√©sien</h4>
                    <div class="formula">R = R1 √ó R2</div>
                    <p>Concat√©nation de tous les tuples.</p>
                    <div class="formula">
                        degr√©(R) = degr√©(R1) + degr√©(R2)<br>
                        lignes(R) = lignes(R1) √ó lignes(R2)
                    </div>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Couleurs :</strong> {Rouge, Bleu}</p>
                        <p><strong>Tailles :</strong> {S, M, L}</p>
                        <p><strong>R√©sultat :</strong> 2 √ó 3 = 6 combinaisons</p>
                        <p>{(Rouge,S), (Rouge,M), (Rouge,L), (Bleu,S), (Bleu,M), (Bleu,L)}</p>
                    </div>
                </div>

                <div class="card">
                    <h4>‚ãà Œ∏-Jointure</h4>
                    <div class="formula">R = R1 ‚ãà<sub>condition</sub> R2</div>
                    <p>Bas√©e sur une condition de comparaison (&lt;, ‚â§, &gt;, ‚â•, =, ‚â†).</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Employ√©s gagnant plus que leur manager</p>
                        <div class="formula">EMPLOY√â ‚ãà<sub>EMPLOY√â.salaire > MANAGER.salaire</sub> MANAGER</div>
                    </div>
                </div>

                <div class="card">
                    <h4>‚ãà √âqui-jointure</h4>
                    <p>Jointure o√π la condition est l'√©galit√© (R1.ai = R2.bj).</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Clients avec leurs commandes</p>
                        <div class="formula">CLIENT ‚ãà<sub>CLIENT.id = COMMANDE.idClient</sub> COMMANDE</div>
                    </div>
                </div>

                <div class="card">
                    <h4>‚àó Jointure Naturelle</h4>
                    <div class="formula">R = R1 ‚àó R2</div>
                    <p>√âqui-jointure sur les attributs de m√™me nom, supprimant les colonnes r√©p√©t√©es.</p>
                    <div class="formula">degr√©(R) = degr√©(R1) + degr√©(R2) ‚àí 1 (par couple identique)</div>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>CLIENT :</strong> (idClient, nom)</p>
                        <p><strong>COMMANDE :</strong> (idCommande, idClient, montant)</p>
                        <p><strong>R√©sultat :</strong> (idClient, nom, idCommande, montant)</p>
                    </div>
                </div>

                <div class="card">
                    <h4>√∑ Division</h4>
                    <div class="formula">R = R1 √∑ R2</div>
                    <p>Utilis√©e pour les requ√™tes de type <strong>"Tous"</strong>.</p>
                    <div class="example-box">
                        <h4>Exemple</h4>
                        <p><strong>Question :</strong> Quels clients ont achet√© <strong>tous</strong> les produits ?</p>
                        <p><strong>ACHAT(idClient, idProduit)</strong></p>
                        <p><strong>PRODUIT(idProduit)</strong></p>
                        <div class="formula">ACHAT √∑ PRODUIT</div>
                        <p>Retourne les clients ayant achet√© chaque produit de la table PRODUIT.</p>
                    </div>
                </div>
            </section>

            <!-- Section 4 : SQL -->
            <section id="sql">
                <h2>4. Langage SQL (LID)</h2>

                <p>Le SQL traduit l'alg√®bre relationnelle en requ√™tes textuelles.</p>

                <h3>Structure d'une Requ√™te SELECT</h3>

                <pre><code>SELECT [DISTINCT] colonnes    -- Projection
FROM tables                   -- Origine des donn√©es
WHERE conditions              -- S√©lection et Jointures
GROUP BY colonnes             -- Groupement pour agr√©gats
HAVING condition_groupe       -- Filtre sur les agr√©gats
ORDER BY colonne ASC/DESC;    -- Tri du r√©sultat</code></pre>

                <div class="example-box">
                    <h4>Exemple Complet</h4>
                    <p><strong>Question :</strong> Afficher les d√©partements ayant plus de 5 employ√©s, tri√©s par nombre d'employ√©s d√©croissant</p>
                    <pre><code>SELECT d.nomDepartement, COUNT(e.idEmploye) AS nbEmployes
FROM Departement d
INNER JOIN Employe e ON d.idDepartement = e.idDepartement
GROUP BY d.nomDepartement
HAVING COUNT(e.idEmploye) > 5
ORDER BY nbEmployes DESC;</code></pre>
                </div>

                <h3>Fonctions d'Agr√©gation</h3>

                <table>
                    <tr>
                        <th>Fonction</th>
                        <th>Description</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td><code>COUNT</code></td>
                        <td>D√©nombrement de lignes</td>
                        <td><code>SELECT COUNT(*) FROM Client;</code></td>
                    </tr>
                    <tr>
                        <td><code>MIN / MAX</code></td>
                        <td>Valeurs minimale / maximale</td>
                        <td><code>SELECT MAX(salaire) FROM Employe;</code></td>
                    </tr>
                    <tr>
                        <td><code>AVG</code></td>
                        <td>Moyenne des valeurs</td>
                        <td><code>SELECT AVG(prix) FROM Produit;</code></td>
                    </tr>
                    <tr>
                        <td><code>SUM</code></td>
                        <td>Somme des valeurs</td>
                        <td><code>SELECT SUM(montant) FROM Commande;</code></td>
                    </tr>
                </table>

                <h3>Types de Jointures SQL</h3>

                <div class="card">
                    <h4>INNER JOIN (Jointure Interne)</h4>
                    <p>Retourne uniquement les lignes ayant une correspondance dans les deux tables.</p>
                    <div class="example-box">
                        <p><strong>Ancienne syntaxe :</strong></p>
                        <pre><code>SELECT * 
FROM Client c, Commande cmd 
WHERE c.idClient = cmd.idClient;</code></pre>
                        <p><strong>Syntaxe moderne (norme SQL) :</strong></p>
                        <pre><code>SELECT * 
FROM Client c 
INNER JOIN Commande cmd ON c.idClient = cmd.idClient;</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>LEFT OUTER JOIN (Jointure Externe Gauche)</h4>
                    <p>Inclut toutes les lignes de la table gauche, m√™me si elles n'ont pas de correspondance dans la table droite. Les valeurs manquantes sont compl√©t√©es par NULL.</p>
                    <div class="example-box">
                        <pre><code>SELECT c.nom, cmd.numCommande, cmd.montant
FROM Client c 
LEFT OUTER JOIN Commande cmd ON c.idClient = cmd.idClient;</code></pre>
                        <p><strong>R√©sultat :</strong> Tous les clients sont affich√©s, m√™me ceux sans commande (montant = NULL)</p>
                    </div>
                </div>

                <div class="card">
                    <h4>RIGHT OUTER JOIN (Jointure Externe Droite)</h4>
                    <p>Inclut toutes les lignes de la table droite, compl√©t√©es par NULL si n√©cessaire.</p>
                </div>

                <h3>Concepts de S√©lection Avanc√©s</h3>

                <div class="card">
                    <h4>LIKE - Recherche de Motifs</h4>
                    <p>Permet de rechercher des motifs dans les cha√Ænes de caract√®res.</p>
                    <ul>
                        <li><code>%</code> : Remplace z√©ro ou plusieurs caract√®res</li>
                        <li><code>_</code> : Remplace exactement un caract√®re</li>
                    </ul>
                    <div class="example-box">
                        <pre><code>-- Clients dont le nom commence par 'Dup'
SELECT * FROM Client WHERE nom LIKE 'Dup%';

-- Clients avec exactement 5 lettres dans le nom
SELECT * FROM Client WHERE nom LIKE '_____';

-- Clients contenant 'art' dans le nom
SELECT * FROM Client WHERE nom LIKE '%art%';</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>BETWEEN - Intervalles</h4>
                    <p>Teste si une valeur est comprise dans un intervalle (inclusif).</p>
                    <div class="example-box">
                        <pre><code>-- Employ√©s avec salaire entre 2000 et 4000
SELECT * FROM Employe 
WHERE salaire BETWEEN 2000 AND 4000;

-- Commandes de janvier 2024
SELECT * FROM Commande 
WHERE dateCommande BETWEEN '2024-01-01' AND '2024-01-31';</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>IN - Appartenance √† une Liste</h4>
                    <p>V√©rifie si une valeur appartient √† une liste de valeurs.</p>
                    <div class="example-box">
                        <pre><code>-- Clients de Paris, Lyon ou Marseille
SELECT * FROM Client 
WHERE ville IN ('Paris', 'Lyon', 'Marseille');

-- √âquivalent √† :
SELECT * FROM Client 
WHERE ville = 'Paris' OR ville = 'Lyon' OR ville = 'Marseille';</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>IS NULL - Test de Valeur Nulle</h4>
                    <p>Teste si un champ est vide (NULL).</p>
                    <div class="example-box">
                        <pre><code>-- Employ√©s sans manager assign√©
SELECT * FROM Employe WHERE idManager IS NULL;

-- Clients ayant renseign√© leur email
SELECT * FROM Client WHERE email IS NOT NULL;</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h4>EXISTS - Test d'Existence</h4>
                    <p>Renvoie vrai si une sous-requ√™te produit au moins une ligne.</p>
                    <div class="example-box">
                        <pre><code>-- Clients ayant au moins une commande
SELECT c.nom 
FROM Client c
WHERE EXISTS (
    SELECT 1 FROM Commande cmd 
    WHERE cmd.idClient = c.idClient
);

-- Produits jamais command√©s
SELECT p.nomProduit 
FROM Produit p
WHERE NOT EXISTS (
    SELECT 1 FROM LigneCommande lc 
    WHERE lc.idProduit = p.idProduit
);</code></pre>
                    </div>
                </div>
            </section>

            <!-- Section 5 : Exercices d'Alg√®bre Relationnelle -->
            <section id="exercice-algebre">
                <h2>5. Exercices d'Alg√®bre Relationnelle</h2>

                <div class="card">
                    <h3>üìö Exercice 1 : Gestion des Employ√©s</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>EMP(ENO, ENOM, PROF, DATEEMB, SAL, COMM, #DNO)
DEPT(DNO, DNOM, #DIR, VILLE)</code></pre>
                    
                    <table>
                        <tr>
                            <th>Attribut</th>
                            <th>Description</th>
                        </tr>
                        <tr><td>ENO</td><td>Num√©ro d'employ√© (cl√©)</td></tr>
                        <tr><td>ENOM</td><td>Nom de l'employ√©</td></tr>
                        <tr><td>PROF</td><td>Profession</td></tr>
                        <tr><td>DATEEMB</td><td>Date d'embauche</td></tr>
                        <tr><td>SAL</td><td>Salaire</td></tr>
                        <tr><td>COMM</td><td>Commission</td></tr>
                        <tr><td>DNO</td><td>Num√©ro de d√©partement (cl√©)</td></tr>
                        <tr><td>DNOM</td><td>Nom du d√©partement</td></tr>
                        <tr><td>DIR</td><td>Directeur du d√©partement</td></tr>
                        <tr><td>VILLE</td><td>Lieu du d√©partement</td></tr>
                    </table>
                </div>

                <h3>Solutions en Alg√®bre Relationnelle</h3>

                <div class="example-box">
                    <h4>Question 1 : Employ√©s avec salaire < 5000 et commission > 2000</h4>
                    <div class="formula">œÉ<sub>SAL &lt; 5000 ‚àß COMM &gt; 2000</sub>(EMP)</div>
                </div>

                <div class="example-box">
                    <h4>Question 2 : Nom et salaire des Ing√©nieurs embauch√©s apr√®s 10 F√©v 85</h4>
                    <div class="formula">œÄ<sub>ENOM, SAL</sub>(œÉ<sub>PROF = 'Ing√©nieur' ‚àß DATEEMB &gt; '10/02/85'</sub>(EMP))</div>
                </div>

                <div class="example-box">
                    <h4>Question 3 : Employ√©s du d√©partement 3 avec salaire ‚â• employ√© n¬∞30</h4>
                    <div class="formula">
                        Temp ‚Üê œÄ<sub>SAL</sub>(œÉ<sub>ENO = 30</sub>(EMP))<br>
                        œÉ<sub>DNO = 3 ‚àß SAL ‚â• Temp.SAL</sub>(EMP)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 4 : Pour chaque d√©partement, son nom et le nom de son directeur</h4>
                    <div class="formula">
                        R ‚Üê DEPT ‚ãà<sub>DEPT.DIR = EMP.ENO</sub> EMP<br>
                        œÄ<sub>DNOM, ENOM</sub>(R)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 5 : Pour chaque employ√©, son nom et la ville de son d√©partement</h4>
                    <div class="formula">œÄ<sub>ENOM, VILLE</sub>(EMP ‚ãà<sub>EMP.DNO = DEPT.DNO</sub> DEPT)</div>
                </div>

                <div class="example-box">
                    <h4>Question 6 : Employ√©s du d√©partement dont la ville est Boston</h4>
                    <div class="formula">
                        DeptBoston ‚Üê œÄ<sub>DNO</sub>(œÉ<sub>VILLE = 'Boston'</sub>(DEPT))<br>
                        EMP ‚ãà DeptBoston
                    </div>
                </div>

                <div class="card">
                    <h3>üì¶ Exercice 2 : Gestion de Redistribution de Produits</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>FOURNISSEUR(N¬∞FOUR, NOM, ADRESSE, VILLE)
PRODUIT(N¬∞PROD, DESIGNATION, PRIX, POIDS, COULEUR)
COMMANDE(N¬∞CMDE, #N¬∞FOUR, #N¬∞PROD, QUANTIT√â)</code></pre>
                </div>

                <h3>Solutions en Alg√®bre Relationnelle</h3>

                <div class="example-box">
                    <h4>Question 1 : D√©signation des produits pesant > 5 Kilos et de couleur Bleu</h4>
                    <div class="formula">œÄ<sub>DESIGNATION</sub>(œÉ<sub>POIDS &gt; 5 ‚àß COULEUR = 'Bleu'</sub>(PRODUIT))</div>
                </div>

                <div class="example-box">
                    <h4>Question 2 : Produits ayant le m√™me prix et la m√™me couleur</h4>
                    <div class="formula">
                        P1 ‚Üê œÅ(P1)(PRODUIT)<br>
                        P2 ‚Üê œÅ(P2)(PRODUIT)<br>
                        œÉ<sub>P1.N¬∞PROD ‚â† P2.N¬∞PROD ‚àß P1.PRIX = P2.PRIX ‚àß P1.COULEUR = P2.COULEUR</sub>(P1 √ó P2)
                    </div>
                    <p><small>œÅ : op√©rateur de renommage pour cr√©er des alias</small></p>
                </div>

                <div class="example-box">
                    <h4>Question 3 : Fournisseurs ayant eu des commandes</h4>
                    <div class="formula">œÄ<sub>N¬∞FOUR, NOM, ADRESSE, VILLE</sub>(FOURNISSEUR ‚ãà COMMANDE)</div>
                    <p><strong>Ou plus simplement :</strong></p>
                    <div class="formula">FOURNISSEUR ‚ãà COMMANDE</div>
                </div>

                <div class="example-box">
                    <h4>Question 4 : Quantit√©s d'armoires command√©es et noms de leurs fournisseurs</h4>
                    <div class="formula">
                        Armoires ‚Üê œÉ<sub>DESIGNATION = 'Armoire'</sub>(PRODUIT)<br>
                        R ‚Üê COMMANDE ‚ãà Armoires ‚ãà FOURNISSEUR<br>
                        œÄ<sub>NOM, QUANTIT√â</sub>(R)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 5 : Ville du fournisseur et d√©signation du produit de la commande n¬∞117</h4>
                    <div class="formula">
                        C117 ‚Üê œÉ<sub>N¬∞CMDE = 117</sub>(COMMANDE)<br>
                        R ‚Üê C117 ‚ãà FOURNISSEUR ‚ãà PRODUIT<br>
                        œÄ<sub>VILLE, DESIGNATION</sub>(R)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 6 : D√©signation et prix des produits fournis par les fournisseurs de Tunis</h4>
                    <div class="formula">
                        FourTunis ‚Üê œÄ<sub>N¬∞FOUR</sub>(œÉ<sub>VILLE = 'Tunis'</sub>(FOURNISSEUR))<br>
                        CmdTunis ‚Üê COMMANDE ‚ãà FourTunis<br>
                        R ‚Üê CmdTunis ‚ãà PRODUIT<br>
                        œÄ<sub>DESIGNATION, PRIX</sub>(R)
                    </div>
                </div>

                <div class="example-box">
                    <h4>Question 7 : Fournisseur ayant command√© TOUS les produits (Division)</h4>
                    <div class="formula">
                        Temp ‚Üê œÄ<sub>N¬∞FOUR, N¬∞PROD</sub>(COMMANDE)<br>
                        AllProd ‚Üê œÄ<sub>N¬∞PROD</sub>(PRODUIT)<br>
                        ResultFour ‚Üê Temp √∑ AllProd<br>
                        FOURNISSEUR ‚ãà ResultFour
                    </div>
                    <div class="tip">
                        La division permet de trouver les fournisseurs qui ont command√© l'ensemble complet des produits.
                    </div>
                </div>
            </section>

            <!-- Section 6 : Exercices SQL -->
            <section id="exercice-sql">
                <h2>6. Exercices Pratiques SQL</h2>

                <div class="card">
                    <h3>‚úàÔ∏è Exercice 1 : Pilotes-Avions-Vols</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>Pilote(numP, nomP, prenomP, ville, salaire)
Avion(numAv, typeAv, capacite, localisation)
Vol(numVol, #numP, #numAv, villeDep, villeAr)</code></pre>
                </div>

                <h3>Cr√©ation des Tables (LDD)</h3>

                <div class="example-box">
                    <h4>Cr√©ation avec Contraintes</h4>
                    <pre><code>CREATE TABLE Pilote (
    numP NUMBER(8) PRIMARY KEY,
    nomP VARCHAR2(20) NOT NULL,
    prenomP VARCHAR2(20),
    ville VARCHAR2(30),
    salaire NUMBER NOT NULL
);

CREATE TABLE Avion (
    numAv NUMBER(6) PRIMARY KEY,
    typeAv VARCHAR2(30),
    capacite NUMBER(6),
    localisation VARCHAR2(30)
);

CREATE TABLE Vol (
    numVol NUMBER(4) PRIMARY KEY,
    numP NUMBER(8) NOT NULL,
    numAv NUMBER(6) NOT NULL,
    villeDep VARCHAR2(25),
    villeAr VARCHAR2(25),
    FOREIGN KEY (numP) REFERENCES Pilote(numP),
    FOREIGN KEY (numAv) REFERENCES Avion(numAv)
);</code></pre>
                </div>

                <h3>Requ√™tes SQL (Solutions)</h3>

                <div class="example-box">
                    <h4>a. Tous les vols</h4>
                    <pre><code>SELECT * FROM Vol;</code></pre>
                </div>

                <div class="example-box">
                    <h4>b. Pilotes avec salaire entre 6200 et 6500</h4>
                    <pre><code>SELECT nomP, prenomP, salaire 
FROM Pilote 
WHERE salaire BETWEEN 6200 AND 6500;</code></pre>
                </div>

                <div class="example-box">
                    <h4>c. Pilotes les mieux pay√©s</h4>
                    <pre><code>SELECT nomP, prenomP, salaire 
FROM Pilote 
WHERE salaire = (SELECT MAX(salaire) FROM Pilote);</code></pre>
                </div>

                <div class="example-box">
                    <h4>d. Avions localis√©s √† Paris</h4>
                    <pre><code>SELECT * FROM Avion WHERE localisation = 'Paris';</code></pre>
                </div>

                <div class="example-box">
                    <h4>e. Avions dans la m√™me ville que le pilote 'Sami'</h4>
                    <pre><code>SELECT numAv, typeAv, capacite, localisation
FROM Avion
WHERE localisation = (
    SELECT ville FROM Pilote WHERE prenomP = 'Sami'
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>f. Caract√©ristiques du vol num√©ro 714</h4>
                    <pre><code>SELECT v.numVol, v.villeDep, v.villeAr, a.typeAv, p.nomP
FROM Vol v
INNER JOIN Avion a ON v.numAv = a.numAv
INNER JOIN Pilote p ON v.numP = p.numP
WHERE v.numVol = 714;</code></pre>
                </div>

                <div class="example-box">
                    <h4>g. Num√©ro et type des avions affect√©s √† des vols</h4>
                    <pre><code>SELECT DISTINCT a.numAv, a.typeAv
FROM Avion a
INNER JOIN Vol v ON a.numAv = v.numAv;</code></pre>
                </div>

                <div class="example-box">
                    <h4>h. Nombre total de vols</h4>
                    <pre><code>SELECT COUNT(*) AS nombreVols FROM Vol;</code></pre>
                </div>

                <div class="example-box">
                    <h4>i. Avions non affect√©s √† des vols (3 m√©thodes)</h4>
                    <p><strong>M√©thode 1 : Requ√™te non synchrone (sous-requ√™te)</strong></p>
                    <pre><code>SELECT * FROM Avion
WHERE numAv NOT IN (SELECT numAv FROM Vol);</code></pre>
                    
                    <p><strong>M√©thode 2 : Requ√™te synchrone (EXISTS)</strong></p>
                    <pre><code>SELECT * FROM Avion a
WHERE NOT EXISTS (
    SELECT 1 FROM Vol v WHERE v.numAv = a.numAv
);</code></pre>
                    
                    <p><strong>M√©thode 3 : Soustraction (MINUS)</strong></p>
                    <pre><code>SELECT numAv FROM Avion
MINUS
SELECT numAv FROM Vol;</code></pre>
                </div>

                <div class="example-box">
                    <h4>j. Pr√©nom et nom concat√©n√©s</h4>
                    <pre><code>SELECT INITCAP(prenomP) || ' ' || UPPER(nomP) AS "Nom Complet"
FROM Pilote;</code></pre>
                    <p><small>INITCAP : 1√®re lettre en majuscule | UPPER : tout en majuscule | || : concat√©nation</small></p>
                </div>

                <div class="example-box">
                    <h4>k. Pilote ayant effectu√© le plus de vols</h4>
                    <pre><code>SELECT p.nomP, p.prenomP, COUNT(v.numVol) AS nbVols
FROM Pilote p
INNER JOIN Vol v ON p.numP = v.numP
GROUP BY p.numP, p.nomP, p.prenomP
HAVING COUNT(v.numVol) = (
    SELECT MAX(COUNT(numVol))
    FROM Vol
    GROUP BY numP
);</code></pre>
                </div>

                <div class="card">
                    <h3>üéì Exercice 2 : √âtudiant-Enseignant-Mati√®re-√âvaluation</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>Etudiant(numEtu, nomEtu, prenomEtu, age, genre)
Enseignant(numEns, nomEns, prenomEns, grade)
Matiere(numMat, nomMat, coefficient, #numEns)
Evaluation(#numEtu, #numMat, note)</code></pre>
                </div>

                <h3>Cr√©ation des Tables</h3>

                <div class="example-box">
                    <pre><code>CREATE TABLE Etudiant (
    numEtu NUMBER(6) PRIMARY KEY,
    nomEtu VARCHAR2(20) NOT NULL,
    prenomEtu VARCHAR2(20),
    age NUMBER(2),
    genre CHAR(1) CHECK (genre IN ('M', 'F'))
);

CREATE TABLE Enseignant (
    numEns NUMBER(6) PRIMARY KEY,
    nomEns VARCHAR2(30) NOT NULL,
    prenomEns VARCHAR2(30),
    grade CHAR(3) CHECK (grade IN ('ASS', 'MCF', 'PRO'))
);

CREATE TABLE Matiere (
    numMat NUMBER(4) PRIMARY KEY,
    nomMat VARCHAR2(25) NOT NULL,
    coefficient NUMBER(1) NOT NULL,
    numEns NUMBER(6),
    FOREIGN KEY (numEns) REFERENCES Enseignant(numEns)
);

CREATE TABLE Evaluation (
    numEtu NUMBER(6),
    numMat NUMBER(4),
    note NUMBER(4,2) CHECK (note BETWEEN 0 AND 20),
    PRIMARY KEY (numEtu, numMat),
    FOREIGN KEY (numEtu) REFERENCES Etudiant(numEtu),
    FOREIGN KEY (numMat) REFERENCES Matiere(numMat)
);</code></pre>
                </div>

                <h3>Requ√™tes SQL (Solutions)</h3>

                <div class="example-box">
                    <h4>a. √âtudiants tri√©s par nom puis pr√©nom</h4>
                    <pre><code>SELECT * FROM Etudiant
ORDER BY nomEtu ASC, prenomEtu ASC;</code></pre>
                </div>

                <div class="example-box">
                    <h4>b. Couples de mati√®res avec m√™me coefficient</h4>
                    <pre><code>SELECT m1.nomMat, m2.nomMat, m1.coefficient
FROM Matiere m1, Matiere m2
WHERE m1.coefficient = m2.coefficient 
  AND m1.numMat < m2.numMat;</code></pre>
                </div>

                <div class="example-box">
                    <h4>c. Tous les enseignants et leurs mati√®res (LEFT JOIN)</h4>
                    <pre><code>SELECT e.nomEns, e.prenomEns, m.nomMat
FROM Enseignant e
LEFT OUTER JOIN Matiere m ON e.numEns = m.numEns;</code></pre>
                </div>

                <div class="example-box">
                    <h4>d. Mati√®res enseign√©es par enseignant</h4>
                    <pre><code>SELECT e.nomEns, e.prenomEns, m.nomMat
FROM Enseignant e
INNER JOIN Matiere m ON e.numEns = m.numEns
ORDER BY e.nomEns;</code></pre>
                </div>

                <div class="example-box">
                    <h4>e. Nombre d'enseignants par grade</h4>
                    <pre><code>SELECT grade, COUNT(*) AS nombreEnseignants
FROM Enseignant
GROUP BY grade;</code></pre>
                </div>

                <div class="example-box">
                    <h4>f. Moyenne par √©tudiant (arrondie √† 2 d√©cimales)</h4>
                    <pre><code>SELECT et.nomEtu, et.prenomEtu, 
       ROUND(AVG(ev.note), 2) AS "Moyenne"
FROM Etudiant et
INNER JOIN Evaluation ev ON et.numEtu = ev.numEtu
GROUP BY et.numEtu, et.nomEtu, et.prenomEtu;</code></pre>
                </div>

                <div class="example-box">
                    <h4>g. Proportion d'√©tudiants avec moyenne > 10</h4>
                    <pre><code>SELECT 
    COUNT(*) * 100.0 / (SELECT COUNT(*) FROM Etudiant) AS "Pourcentage (%)"
FROM (
    SELECT numEtu, AVG(note) AS moyenne
    FROM Evaluation
    GROUP BY numEtu
    HAVING AVG(note) > 10
);</code></pre>
                </div>

                <div class="card">
                    <h3>üíä Exercice 3 : M√©dicaments-Pharmacies</h3>
                    <p><strong>Sch√©ma relationnel :</strong></p>
                    <pre><code>Medicament(refMed, nom, composition, datFab, datExp, #refMedPrinceps)
Pharmacie(idPharm, nom, adresse, zone)
DistributionMed(#refMed, #idPharm, disponibilite, prixVente)</code></pre>
                </div>

                <h3>Cr√©ation des Tables</h3>

                <div class="example-box">
                    <pre><code>CREATE TABLE Medicament (
    refMed NUMBER(10) PRIMARY KEY,
    nom VARCHAR2(100) NOT NULL,
    composition VARCHAR2(100),
    datFab DATE,
    datExp DATE,
    refMedPrinceps NUMBER(10),
    FOREIGN KEY (refMedPrinceps) REFERENCES Medicament(refMed)
);

CREATE TABLE Pharmacie (
    idPharm NUMBER(10) PRIMARY KEY,
    nom VARCHAR2(100) NOT NULL,
    adresse VARCHAR2(100),
    zone VARCHAR2(100)
);

CREATE TABLE DistributionMed (
    refMed NUMBER(10),
    idPharm NUMBER(10),
    disponibilite CHAR(2) DEFAULT 'DI' CHECK (disponibilite IN ('DI', 'ND')),
    prixVente NUMBER(6,3),
    PRIMARY KEY (refMed, idPharm),
    FOREIGN KEY (refMed) REFERENCES Medicament(refMed),
    FOREIGN KEY (idPharm) REFERENCES Pharmacie(idPharm)
);</code></pre>
                </div>

                <h3>Requ√™tes SQL (Solutions)</h3>

                <div class="example-box">
                    <h4>3. Supprimer m√©dicaments avec amoxicilline fabriqu√©s avant jan 2020</h4>
                    <pre><code>DELETE FROM DistributionMed
WHERE refMed IN (
    SELECT refMed FROM Medicament
    WHERE composition LIKE '%amoxicilline%'
      AND datFab < TO_DATE('01/01/2020', 'DD/MM/YYYY')
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>a. M√©dicaments non disponibles de la zone Sud</h4>
                    <pre><code>SELECT DISTINCT m.*
FROM Medicament m
INNER JOIN DistributionMed dm ON m.refMed = dm.refMed
INNER JOIN Pharmacie p ON dm.idPharm = p.idPharm
WHERE p.zone = 'Sud' AND dm.disponibilite = 'ND';</code></pre>
                </div>

                <div class="example-box">
                    <h4>b. M√©dicaments dont la date d'expiration est d√©pass√©e</h4>
                    <pre><code>SELECT * FROM Medicament
WHERE datExp < SYSDATE;</code></pre>
                </div>

                <div class="example-box">
                    <h4>c. M√©dicaments non encore mis √† la distribution (NOT EXISTS)</h4>
                    <pre><code>SELECT * FROM Medicament m
WHERE NOT EXISTS (
    SELECT 1 FROM DistributionMed dm 
    WHERE dm.refMed = m.refMed
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>d. Pharmacies deux par deux de la m√™me zone</h4>
                    <pre><code>SELECT p1.nom AS Pharmacie1, p2.nom AS Pharmacie2, p1.zone
FROM Pharmacie p1, Pharmacie p2
WHERE p1.zone = p2.zone AND p1.idPharm < p2.idPharm;</code></pre>
                </div>

                <div class="example-box">
                    <h4>e. Cr√©er vue RepartitionPharm</h4>
                    <pre><code>CREATE VIEW RepartitionPharm AS
SELECT zone, COUNT(*) AS nombrePharmacies
FROM Pharmacie
GROUP BY zone;</code></pre>
                </div>

                <div class="example-box">
                    <h4>f. Pharmacies distribuant TOUS les m√©dicaments (Division)</h4>
                    <pre><code>SELECT p.nom
FROM Pharmacie p
WHERE NOT EXISTS (
    SELECT m.refMed FROM Medicament m
    WHERE NOT EXISTS (
        SELECT 1 FROM DistributionMed dm
        WHERE dm.refMed = m.refMed 
          AND dm.idPharm = p.idPharm
    )
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>g. M√©dicaments distribu√©s dans plus de 3 zones</h4>
                    <pre><code>SELECT m.nom, COUNT(DISTINCT p.zone) AS nbZones
FROM Medicament m
INNER JOIN DistributionMed dm ON m.refMed = dm.refMed
INNER JOIN Pharmacie p ON dm.idPharm = p.idPharm
GROUP BY m.refMed, m.nom
HAVING COUNT(DISTINCT p.zone) > 3;</code></pre>
                </div>

                <div class="example-box">
                    <h4>h. Chaque m√©dicament et son princeps √©ventuel</h4>
                    <pre><code>SELECT m1.nom AS Medicament, m2.nom AS Princeps
FROM Medicament m1
LEFT OUTER JOIN Medicament m2 ON m1.refMedPrinceps = m2.refMed;</code></pre>
                </div>
            </section>

            <!-- Section 7 : Exercice Pratique Biblioth√®que -->
            <section id="exercice">
                <h2>7. Exercice Pratique : Syst√®me de Biblioth√®que</h2>

                <div class="card">
                    <h3>üìñ √ânonc√©</h3>
                    <p>Une biblioth√®que de pr√™t dispose d'un certain nombre d'ouvrages, class√©s par rayon (Litt√©rature, Histoire, G√©ographie, etc.). Chaque ouvrage est l'≈ìuvre d'un ou plusieurs auteurs, et doit √©galement √™tre r√©f√©renc√© selon un certain nombre de mots-cl√©s.</p>
                    
                    <p>Chaque adh√©rent peut emprunter jusqu'√† 5 livres en m√™me temps, et dispose d'un certain d√©lai pass√© lequel il doit recevoir des relances puis des p√©nalit√©s.</p>

                    <p>En plus de cela, il existe une biblioth√®que centrale et des antennes locales. Chaque antenne poss√®de un fonds qui lui est propre, et peut de surcro√Æt se procurer certains ouvrages aupr√®s de la biblioth√®que centrale (mais pas d'une autre biblioth√®que locale). Tout adh√©rent peut automatiquement emprunter des ouvrages dans toutes les antennes locales.</p>
                </div>

                <h3>Trois Cas de Complexit√© Croissante</h3>

                <div class="card">
                    <h4>Cas 1 : Biblioth√®que Simple (Un exemplaire par ouvrage, sans historique)</h4>
                    <p>La biblioth√®que ne poss√®de qu'un seul exemplaire de chaque ouvrage. Elle enregistre uniquement les emprunts pr√©sents (il n'y a pas d'historique des emprunts pass√©s).</p>
                    
                    <div class="schema-diagram">
                        <h4>Sch√©ma Entit√©-Association - Cas 1</h4>
                        <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                            <img src="image/Case1Biblio.jpeg" style="max-width: 100%; height: auto;" id="schema-cas1">
                        </div>
                    </div>

                    <div class="tip">
                        <strong>Points cl√©s du Cas 1 :</strong>
                        <ul>
                            <li>Relation directe entre Ouvrage et Emprunt (0,1)</li>
                            <li>Un ouvrage peut √™tre emprunt√© ou disponible</li>
                            <li>Pas de table d'historique n√©cessaire</li>
                            <li>L'attribut date_Emprunt et delai sont dans l'association Emprunt</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h4>Cas 2 : Avec Historique (Un exemplaire, historique complet)</h4>
                    <p>La biblioth√®que ne poss√®de qu'un seul exemplaire de chaque ouvrage, mais elle tient un historique de tous les emprunts qui ont √©t√© effectu√©s.</p>
                    
                    <div class="schema-diagram">
                        <h4>Sch√©ma Entit√©-Association - Cas 2</h4>
                        <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                            <img src="image/Cas2Biblio.jpg" style="max-width: 100%; height: auto;" id="schema-cas2">
                        </div>
                    </div>

                    <div class="tip">
                        <strong>Points cl√©s du Cas 2 :</strong>
                        <ul>
                            <li>L'association Emprunt devient une entit√© avec identifiant (idEmprunt)</li>
                            <li>Cardinalit√© Ouvrage-Emprunt passe √† (0,n) pour g√©rer l'historique</li>
                            <li>Nouvelle association DetailsEmprunt pour lier Ouvrage et Emprunt</li>
                            <li>Permet de conserver tous les emprunts pass√©s</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h4>Cas 3 : Complet (Plusieurs exemplaires + Historique)</h4>
                    <p>La biblioth√®que tient un historique ET elle est maintenant susceptible de poss√©der plusieurs exemplaires de certains ouvrages.</p>
                    
                    <div class="schema-diagram">
                        <h4>Sch√©ma Entit√©-Association - Cas 3</h4>
                        <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                            <img src="image/Cas3Biblio.jpg" style="max-width: 100%; height: auto;" id="schema-cas3">
                        </div>
                       <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                            <img src="image/Cas3BisBiblio.jpg" style="max-width: 100%; height: auto;" id="schema-cas3">
                        </div>
                    </div>

                    <div class="tip">
                        <strong>Points cl√©s du Cas 3 :</strong>
                        <ul>
                            <li>Les attributs date_Emprunt et delai migrent vers l'entit√© Ouvrage</li>
                            <li>L'association Emprunt relie directement Ouvrage et Adherent</li>
                            <li>Cardinalit√© (0,1) entre Ouvrage et Emprunt (un ouvrage emprunt√© ou non)</li>
                            <li>Structure plus simple mais permettant la gestion de multiples exemplaires</li>
                        </ul>
                    </div>
                </div>

                <div class="warning">
                    <strong>Extension : Biblioth√®que Centrale et Antennes Locales</strong><br>
                    Le sch√©ma complet (Image 1) int√®gre aussi :
                    <ul>
                        <li>BiblioAntenneLoc ale (antennes locales)</li>
                        <li>BibliothequeCentrale (biblioth√®que centrale)</li>
                        <li>Association "Demande_par" (0,n) entre BiblioAntenneLocale et BibliothequeCentrale</li>
                        <li>Association "Approvionnement" avec date_Approv pour tracer les approvisionnements</li>
                        <li>Association "AppartientA" (0,n) liant les antennes aux ouvrages disponibles localement</li>
                    </ul>
                </div>

                <h3>Mod√®le Relationnel pour le Cas 3</h3>

                <div class="example-box">
                    <h4>Tables Principales</h4>
                    <pre><code>-- Table des ouvrages
CREATE TABLE Ouvrage (
    idOuvrage INT PRIMARY KEY,
    titre VARCHAR(200),
    idRayon INT,
    date_Emprunt DATE,
    delai INT,
    FOREIGN KEY (idRayon) REFERENCES Rayon(idRayon)
);

-- Table des auteurs
CREATE TABLE Auteur (
    idAuteur INT PRIMARY KEY,
    nom VARCHAR(100),
    prenom VARCHAR(100)
);

-- Table des adh√©rents
CREATE TABLE Adherent (
    idAdherent INT PRIMARY KEY,
    nom VARCHAR(100),
    prenom VARCHAR(100),
    adresse VARCHAR(200),
    dateInscription DATE
);

-- Table des rayons
CREATE TABLE Rayon (
    idRayon INT PRIMARY KEY,
    Type VARCHAR(50)
);

-- Table des mots-cl√©s
CREATE TABLE MotCle (
    idMC INT PRIMARY KEY,
    intitule VARCHAR(100)
);

-- Association Oeuvre De (n:n)
CREATE TABLE OeuvreDe (
    idOuvrage INT,
    idAuteur INT,
    PRIMARY KEY (idOuvrage, idAuteur),
    FOREIGN KEY (idOuvrage) REFERENCES Ouvrage(idOuvrage),
    FOREIGN KEY (idAuteur) REFERENCES Auteur(idAuteur)
);

-- Association Referencement (n:n)
CREATE TABLE Referencement (
    idOuvrage INT,
    idMC INT,
    PRIMARY KEY (idOuvrage, idMC),
    FOREIGN KEY (idOuvrage) REFERENCES Ouvrage(idOuvrage),
    FOREIGN KEY (idMC) REFERENCES MotCle(idMC)
);

-- Association Emprunt (relation actuelle)
CREATE TABLE Emprunt (
    idOuvrage INT PRIMARY KEY,
    idAdherent INT,
    FOREIGN KEY (idOuvrage) REFERENCES Ouvrage(idOuvrage),
    FOREIGN KEY (idAdherent) REFERENCES Adherent(idAdherent)
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>Requ√™tes SQL Utiles</h4>
                    <pre><code>-- 1. Lister tous les ouvrages disponibles (non emprunt√©s)
SELECT o.titre, r.Type 
FROM Ouvrage o
INNER JOIN Rayon r ON o.idRayon = r.idRayon
WHERE o.idOuvrage NOT IN (SELECT idOuvrage FROM Emprunt);

-- 2. Nombre d'emprunts en cours par adh√©rent
SELECT a.nom, a.prenom, COUNT(e.idOuvrage) AS nbEmprunts
FROM Adherent a
LEFT JOIN Emprunt e ON a.idAdherent = e.idAdherent
GROUP BY a.idAdherent, a.nom, a.prenom;

-- 3. Adh√©rents ayant atteint la limite de 5 emprunts
SELECT a.nom, a.prenom, COUNT(e.idOuvrage) AS nbEmprunts
FROM Adherent a
INNER JOIN Emprunt e ON a.idAdherent = e.idAdherent
GROUP BY a.idAdherent, a.nom, a.prenom
HAVING COUNT(e.idOuvrage) >= 5;

-- 4. Ouvrages en retard (d√©lai d√©pass√©)
SELECT o.titre, a.nom, o.date_Emprunt, o.delai,
       DATEDIFF(CURRENT_DATE, o.date_Emprunt) AS joursEcoules
FROM Ouvrage o
INNER JOIN Emprunt e ON o.idOuvrage = e.idOuvrage
INNER JOIN Adherent a ON e.idAdherent = a.idAdherent
WHERE DATEDIFF(CURRENT_DATE, o.date_Emprunt) > o.delai;

-- 5. Ouvrages par auteur
SELECT a.nom, a.prenom, COUNT(od.idOuvrage) AS nbOuvrages
FROM Auteur a
LEFT JOIN OeuvreDe od ON a.idAuteur = od.idAuteur
GROUP BY a.idAuteur, a.nom, a.prenom
ORDER BY nbOuvrages DESC;</code></pre>
                </div>
            </section>

            <!-- Section 8 : Exercice ASSURAUTO -->
            <section id="exercice-assurance">
                <h2>8. Exercice : Gestion de Sinistres ASSURAUTO</h2>

                <div class="card">
                    <h3>üöó √ânonc√©</h3>
                    <p>On souhaite construire un MEA destin√© √† la gestion de sinistres pour la compagnie d'assurance automobile ASSURAUTO √† partir de la lettre de demande d'expertise envoy√©e par un de ses agents d'assurance. On souhaite garder aussi l'historique des √©changes entre l'agent et l'expert.</p>
                    
                    <div class="example-box">
                        <h4>üìß Lettre de Demande d'Expertise</h4>
                        <div style="background: white; padding: 20px; border-left: 4px solid #667eea;">
                            <p style="text-align: right;"><em>√Ä Paris, le 10 juin 2005</em></p>
                            <p><strong>De la part de M. Pierre Durand, Agent d'assurance ASSURAUTO</strong><br>
                            10, rue Saint-Antoine, 75001 Paris<br>
                            t√©l : 01 42 42 24 24</p>
                            
                            <p><strong>√Ä M. Henri Dupond, Expert en assurance</strong></p>
                            
                            <p>Monsieur,</p>
                            
                            <p>Je vous saisis par le pr√©sent courrier pour vous demander de suivre le dossier du sinistre <strong>SIS20020934</strong> constitu√© √† ce jour suite √† l'accident survenu le <strong>02 juin 2005</strong> au croisement de la rue de Rivoli et de la rue du Renard √† <strong>Paris 1er arrondissement</strong>, √† <strong>11 heures du soir</strong>, par temps de pluie, d'o√π l'√©tat glissant de la chauss√©e √† ce moment-l√†.</p>
                            
                            <p>M. <strong>Andr√© Oliveau</strong> est un des protagonistes de l'accident. Il a souscrit chez nous, depuis le <strong>17 d√©cembre 2002</strong>, un contrat enregistr√© sous le n¬∞ <strong>CTR2002120</strong> et de type <strong>tout risque</strong> sur le v√©hicule impliqu√© dans le sinistre et immatricul√© <strong>123 ABC 75</strong>. Ce v√©hicule est une <strong>Renault Espace de 100 chevaux</strong>.</p>
                            
                            <p>M. Oliveau habite √† Paris, <strong>25 rue de Rivoli, dans le 1er arrondissement</strong>. Il est joignable au <strong>01 42 23 12 20</strong> chez lui, ou au <strong>06 12 12 12 12</strong> sur son portable, ou au <strong>01 23 43 23 34</strong> √† son travail.</p>
                            
                            <p>Voudriez-vous prendre contact avec lui pour convenir d'un rendez-vous en vue de l'expertise que vous voudrez bien effectuer au garage <strong>¬´ Saroul ¬ª, 45, rue Rousseau, 75002 Paris</strong>, dans un d√©lai de <strong>15 jours</strong>.</p>
                            
                            <p>Dans l'attente de votre rapport d'expertise, nous vous prions de croire, Monsieur l'expert, √† nos sentiments distingu√©s.</p>
                            
                            <p><em>M. Durand, Agent d'assurance</em></p>
                        </div>
                    </div>
                </div>

                <h3>Analyse de la Lettre - Entit√©s et Associations</h3>

                <div class="card">
                    <h4>üîç Entit√©s Identifi√©es</h4>
                    <table>
                        <tr>
                            <th>Entit√©</th>
                            <th>Attributs</th>
                            <th>Cl√© Primaire</th>
                        </tr>
                        <tr>
                            <td><strong>Agent_Assurance</strong></td>
                            <td>idAgent, nomAgent, prenomAgent, Adresse</td>
                            <td><u>idAgent</u></td>
                        </tr>
                        <tr>
                            <td><strong>Expert_Assurance</strong></td>
                            <td>idExpert, nomAgent, prenomAgent, Adresse</td>
                            <td><u>idExpert</u></td>
                        </tr>
                        <tr>
                            <td><strong>Client_Assure</strong></td>
                            <td>idClient, nom, prenom, adresse</td>
                            <td><u>idClient</u></td>
                        </tr>
                        <tr>
                            <td><strong>CoordonneesTelephonique</strong></td>
                            <td>numTelephone, type</td>
                            <td><u>numTelephone</u></td>
                        </tr>
                        <tr>
                            <td><strong>ContratAssurance</strong></td>
                            <td>idContrat, date_Contrat, type</td>
                            <td><u>idContrat</u></td>
                        </tr>
                        <tr>
                            <td><strong>Vehicule</strong></td>
                            <td>immatriculation, marque, modele, puissance</td>
                            <td><u>immatriculation</u></td>
                        </tr>
                        <tr>
                            <td><strong>Sinistre</strong></td>
                            <td>idSinistre, date_Sinistre, lieu, heure, description</td>
                            <td><u>idSinistre</u></td>
                        </tr>
                        <tr>
                            <td><strong>Garage</strong></td>
                            <td>idGarage, nomGarage, adresseGarage</td>
                            <td><u>idGarage</u></td>
                        </tr>
                        <tr>
                            <td><strong>RapportExpertise</strong></td>
                            <td>idExpertise, date_Expertise, description</td>
                            <td><u>idExpertise</u></td>
                        </tr>
                    </table>
                </div>

                <div class="card">
                    <h4>üîó Associations Identifi√©es</h4>
                    <ul>
                        <li><strong>Relatif_a</strong> : Client_Assure (0,n) ‚Üî CoordonneesTelephonique (1,1)</li>
                        <li><strong>ConcerneC</strong> : ContratAssurance (1,1) ‚Üî Client_Assure (1,n)</li>
                        <li><strong>ConcerneV</strong> : ContratAssurance (1,1) ‚Üî Vehicule (1,n)</li>
                        <li><strong>Couvre</strong> : ContratAssurance (0,n) ‚Üî Sinistre (1,1)</li>
                        <li><strong>ConcerneSinistre</strong> : Sinistre (1,1) ‚Üî Garage (0,1)</li>
                        <li><strong>Fait_a</strong> : Garage (1,n) ‚Üî RapportExpertise (1,1)</li>
                        <li><strong>Redige_par</strong> : RapportExpertise (1,1) ‚Üî Expert_Assurance (0,n)</li>
                        <li><strong>DemandeExpertise</strong> : Agent_Assurance (0,n) ‚Üî Expert_Assurance (0,n) avec attributs Date_Demande, delai</li>
                    </ul>
                </div>

                <div class="schema-diagram">
                    <h4>Sch√©ma Entit√©-Association - ASSURAUTO</h4>
                    <div style="background: white; padding: 20px; border: 2px dashed #ccc; min-height: 400px; display: flex; align-items: center; justify-content: center;">
                        <img src="image/AssuranceAuto.jpg" alt="Ins√©rez ici l'image du sch√©ma ASSURAUTO" style="max-width: 100%; height: auto;" id="schema-assurauto">
                    </div>
                </div>

                <h3>Mod√®le Relationnel ASSURAUTO</h3>

                <div class="example-box">
                    <h4>Tables D√©riv√©es du MEA</h4>
                    <pre><code>-- Entit√©s
Agent_Assurance(<u>idAgent</u>, nomAgent, prenomAgent, Adresse)

Expert_Assurance(<u>idExpert</u>, nomAgent, prenomAgent, Adresse)

Client_Assure(<u>idClient</u>, nom, prenom, adresse)

CoordonneesTelephonique(<u>numTelephone</u>, type, #idClient)

ContratAssurance(<u>idContrat</u>, date_Contrat, type, #idClient, #immatriculation)

Vehicule(<u>immatriculation</u>, marque, modele, puissance)

Sinistre(<u>idSinistre</u>, date_Sinistre, lieu, heure, description, #idContrat, #idGarage)

Garage(<u>idGarage</u>, nomGarage, adresseGarage)

RapportExpertise(<u>idExpertise</u>, date_Expertise, description, #idGarage, #idExpert)

-- Association n:n
DemandeExpertise(<u>#idAgent, #idExpert</u>, Date_Demande, delai)</code></pre>
                </div>

                <h3>Cr√©ation des Tables SQL</h3>

                <div class="example-box">
                    <pre><code>CREATE TABLE Agent_Assurance (
    idAgent NUMBER(10) PRIMARY KEY,
    nomAgent VARCHAR2(50) NOT NULL,
    prenomAgent VARCHAR2(50),
    Adresse VARCHAR2(100)
);

CREATE TABLE Expert_Assurance (
    idExpert NUMBER(10) PRIMARY KEY,
    nomAgent VARCHAR2(50) NOT NULL,
    prenomAgent VARCHAR2(50),
    Adresse VARCHAR2(100)
);

CREATE TABLE Client_Assure (
    idClient NUMBER(10) PRIMARY KEY,
    nom VARCHAR2(50) NOT NULL,
    prenom VARCHAR2(50),
    adresse VARCHAR2(100)
);

CREATE TABLE CoordonneesTelephonique (
    numTelephone VARCHAR2(20) PRIMARY KEY,
    type VARCHAR2(20) CHECK (type IN ('domicile', 'portable', 'travail')),
    idClient NUMBER(10) NOT NULL,
    FOREIGN KEY (idClient) REFERENCES Client_Assure(idClient)
);

CREATE TABLE Vehicule (
    immatriculation VARCHAR2(20) PRIMARY KEY,
    marque VARCHAR2(50),
    modele VARCHAR2(50),
    puissance NUMBER(5)
);

CREATE TABLE ContratAssurance (
    idContrat VARCHAR2(20) PRIMARY KEY,
    date_Contrat DATE NOT NULL,
    type VARCHAR2(30) CHECK (type IN ('tout risque', 'tiers', 'tiers complet')),
    idClient NUMBER(10) NOT NULL,
    immatriculation VARCHAR2(20) NOT NULL,
    FOREIGN KEY (idClient) REFERENCES Client_Assure(idClient),
    FOREIGN KEY (immatriculation) REFERENCES Vehicule(immatriculation)
);

CREATE TABLE Garage (
    idGarage NUMBER(10) PRIMARY KEY,
    nomGarage VARCHAR2(50) NOT NULL,
    adresseGarage VARCHAR2(100)
);

CREATE TABLE Sinistre (
    idSinistre VARCHAR2(20) PRIMARY KEY,
    date_Sinistre DATE NOT NULL,
    lieu VARCHAR2(100),
    heure VARCHAR2(10),
    description VARCHAR2(500),
    idContrat VARCHAR2(20) NOT NULL,
    idGarage NUMBER(10),
    FOREIGN KEY (idContrat) REFERENCES ContratAssurance(idContrat),
    FOREIGN KEY (idGarage) REFERENCES Garage(idGarage)
);

CREATE TABLE RapportExpertise (
    idExpertise NUMBER(10) PRIMARY KEY,
    date_Expertise DATE,
    description VARCHAR2(500),
    idGarage NUMBER(10) NOT NULL,
    idExpert NUMBER(10) NOT NULL,
    FOREIGN KEY (idGarage) REFERENCES Garage(idGarage),
    FOREIGN KEY (idExpert) REFERENCES Expert_Assurance(idExpert)
);

CREATE TABLE DemandeExpertise (
    idAgent NUMBER(10),
    idExpert NUMBER(10),
    Date_Demande DATE NOT NULL,
    delai NUMBER(3),
    PRIMARY KEY (idAgent, idExpert, Date_Demande),
    FOREIGN KEY (idAgent) REFERENCES Agent_Assurance(idAgent),
    FOREIGN KEY (idExpert) REFERENCES Expert_Assurance(idExpert)
);</code></pre>
                </div>

                <h3>Requ√™tes SQL Utiles pour ASSURAUTO</h3>

                <div class="example-box">
                    <h4>1. Lister tous les sinistres d'un client donn√©</h4>
                    <pre><code>SELECT s.idSinistre, s.date_Sinistre, s.lieu, v.marque, v.modele
FROM Sinistre s
INNER JOIN ContratAssurance c ON s.idContrat = c.idContrat
INNER JOIN Client_Assure cl ON c.idClient = cl.idClient
INNER JOIN Vehicule v ON c.immatriculation = v.immatriculation
WHERE cl.nom = 'Oliveau' AND cl.prenom = 'Andr√©';</code></pre>
                </div>

                <div class="example-box">
                    <h4>2. Sinistres sans rapport d'expertise</h4>
                    <pre><code>SELECT s.*
FROM Sinistre s
WHERE s.idGarage IS NULL OR NOT EXISTS (
    SELECT 1 FROM RapportExpertise r
    WHERE r.idGarage = s.idGarage
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>3. Expert ayant r√©alis√© le plus d'expertises</h4>
                    <pre><code>SELECT e.nomAgent, e.prenomAgent, COUNT(r.idExpertise) AS nbExpertises
FROM Expert_Assurance e
INNER JOIN RapportExpertise r ON e.idExpert = r.idExpert
GROUP BY e.idExpert, e.nomAgent, e.prenomAgent
HAVING COUNT(r.idExpertise) = (
    SELECT MAX(COUNT(idExpertise))
    FROM RapportExpertise
    GROUP BY idExpert
);</code></pre>
                </div>

                <div class="example-box">
                    <h4>4. Clients avec plusieurs v√©hicules assur√©s</h4>
                    <pre><code>SELECT cl.nom, cl.prenom, COUNT(DISTINCT c.immatriculation) AS nbVehicules
FROM Client_Assure cl
INNER JOIN ContratAssurance c ON cl.idClient = c.idClient
GROUP BY cl.idClient, cl.nom, cl.prenom
HAVING COUNT(DISTINCT c.immatriculation) > 1;</code></pre>
                </div>

                <div class="example-box">
                    <h4>5. Tous les num√©ros de t√©l√©phone d'un client</h4>
                    <pre><code>SELECT cl.nom, cl.prenom, ct.numTelephone, ct.type
FROM Client_Assure cl
INNER JOIN CoordonneesTelephonique ct ON cl.idClient = ct.idClient
WHERE cl.nom = 'Oliveau'
ORDER BY ct.type;</code></pre>
                </div>

                <div class="example-box">
                    <h4>6. Historique des demandes d'expertise entre agents et experts</h4>
                    <pre><code>SELECT a.nomAgent AS Agent, e.nomAgent AS Expert, 
       d.Date_Demande, d.delai
FROM DemandeExpertise d
INNER JOIN Agent_Assurance a ON d.idAgent = a.idAgent
INNER JOIN Expert_Assurance e ON d.idExpert = e.idExpert
ORDER BY d.Date_Demande DESC;</code></pre>
                </div>

                <div class="tip">
                    <strong>Points Cl√©s du Mod√®le ASSURAUTO :</strong>
                    <ul>
                        <li>Gestion des coordonn√©es t√©l√©phoniques multiples (domicile, portable, travail)</li>
                        <li>Un client peut avoir plusieurs contrats et plusieurs v√©hicules</li>
                        <li>Un sinistre est li√© √† un contrat et peut n√©cessiter une expertise dans un garage</li>
                        <li>L'historique des demandes d'expertise est conserv√© gr√¢ce √† l'association n:n entre Agent et Expert</li>
                        <li>Auto-r√©f√©rence possible dans M√©dicament pour le princeps (m√™me principe applicable si on veut lier v√©hicules de remplacement)</li>
                    </ul>
                </div>
            </section>

            <!-- Footer -->
            <section style="text-align: center; padding: 30px; background: #f8f9fa; border-radius: 10px; margin-top: 50px;">
                <h3 style="color: #667eea;">üéì Fin du Guide</h3>
                <p>Ce guide couvre les concepts essentiels des bases de donn√©es relationnelles, de la conception √† l'impl√©mentation SQL.</p>
                <p style="color: #999; margin-top: 20px;">Bonne r√©vision ! üìö</p>
            </section>
        </div>
    </div>

    <script>
        // Script pour permettre l'ajout d'images plus tard
        document.addEventListener('DOMContentLoaded', function() {
            // Fonction pour charger une image
            window.chargerImage = function(idElement, urlImage) {
                const img = document.getElementById(idElement);
                if (img && urlImage) {
                    img.src = urlImage;
                    img.style.display = 'block';
                    img.nextElementSibling.style.display = 'none';
                }
            };
            
            // Exemple d'utilisation (d√©commenter et modifier selon vos besoins):
            // chargerImage('schema-cas1', 'URL_DE_VOTRE_IMAGE_CAS1');
            // chargerImage('schema-cas2', 'URL_DE_VOTRE_IMAGE_CAS2');
            // chargerImage('schema-cas3', 'URL_DE_VOTRE_IMAGE_CAS3');
        });
    </script>
</body>
</html>
